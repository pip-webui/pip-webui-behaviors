!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var n;n="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,(n.pip||(n.pip={})).behaviors=e()}}(function(){return function e(n,t,o){function i(a,l){if(!t[a]){if(!n[a]){var c="function"==typeof require&&require;if(!l&&c)return c(a,!0);if(r)return r(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var p=t[a]={exports:{}};n[a][0].call(p.exports,function(e){var t=n[a][1][e];return i(t?t:e)},p,p.exports,e,n,t,o)}return t[a].exports}for(var r="function"==typeof require&&require,a=0;a<o.length;a++)i(o[a]);return i}({1:[function(e,n,t){!function(){"use strict";angular.module("pipBehaviors",["pipFocused","pipSelected","pipInfiniteScroll","pipUnsavedChanges","pipDraggable"])}()},{}],2:[function(e,n,t){!function(){"use strict";var e=angular.module("pipDraggable",[]);e.service("pipDraggable",function(){var e=this;e.inputEvent=function(e){return angular.isDefined(e.touches)?e.touches[0]:angular.isDefined(e.originalEvent)&&angular.isDefined(e.originalEvent.touches)?e.originalEvent.touches[0]:e}}),e.directive("pipDrag",["$rootScope","$parse","$document","$window","pipDraggable",function(e,n,t,o,i){return{restrict:"A",link:function(r,a,l){function c(){a.attr("pip-draggable","false");var e;e=a[0].querySelectorAll?angular.element(a[0].querySelectorAll("[pip-drag-handle]")):a.find("[pip-drag-handle]"),e.length&&(_=e),p(!0),ne=ee?angular.element(a.parent()):l.pipScrollContainer?angular.element(te(r)):angular.element(window)}function u(e){return null!=e&&(!!e&&(e=e.toString().toLowerCase(),"1"==e||"true"==e))}function p(e){e&&(r.$on("$destroy",s),r.$watch(l.pipDrag,f),r.$watch(l.pipCenterAnchor,d),_?_.on(W,v):a.on(W,v),k||"img"!=a[0].nodeName.toLowerCase()||a.on("mousedown",function(){return!1}))}function s(e){p(!1)}function f(e,n){M=e}function d(e,n){angular.isDefined(e)&&(Y=e||"true")}function g(e){return angular.isDefined(angular.element(e.target).attr("pip-cancel-drag"))}function v(e){M&&(g(e)||"mousedown"==e.type&&0!=e.button||(m(),k?(h(),P=setTimeout(function(){h(),$(e)},L),t.on(H,h),t.on(F,h)):$(e)))}function m(){B.left=a.css("css")||0,B.top=a.css("top")||0,B.position=a.css("position"),B.width=a.css("width")}function h(){clearTimeout(P),t.off(H,h),t.off(F,h)}function $(n){M&&(n.preventDefault(),y=a[0].getBoundingClientRect(),N=G?y:{left:document.body.scrollLeft,top:document.body.scrollTop},a.centerX=a[0].offsetWidth/2,a.centerY=a[0].offsetHeight/2,O=i.inputEvent(n).pageX,x=i.inputEvent(n).pageY,R=O-y.left,A=x-y.top,Y?(T=O-a.centerX-o.pageXOffset,I=x-a.centerY-o.pageYOffset):(T=O-R-o.pageXOffset,I=x-A-o.pageYOffset),t.on(H,D),t.on(F,C),oe=e.$on("draggable:_triggerHandlerMove",function(e,n){D(n)}))}function D(n){M&&(n.preventDefault(),a.hasClass("pip-dragging")||(U=V(r),a.addClass("pip-dragging"),e.$broadcast("draggable:start",{x:O,y:x,tx:T,ty:I,event:n,element:a,data:U}),q&&r.$apply(function(){q(r,{$data:U,$event:n})})),O=i.inputEvent(n).pageX,x=i.inputEvent(n).pageY,(J||j)&&b(),Y?(T=O-a.centerX-N.left,I=x-a.centerY-N.top):(T=O-R-N.left,I=x-A-N.top),S(T,I),e.$broadcast("draggable:move",{x:O,y:x,tx:T,ty:I,event:n,element:a,data:U,uid:K,dragOffset:N}))}function C(n){M&&(n.preventDefault(),e.$broadcast("draggable:end",{x:O,y:x,tx:T,ty:I,event:n,element:a,data:U,callback:E,uid:K}),a.removeClass("pip-dragging"),a.parent().find(".pip-drag-enter").removeClass("pip-drag-enter"),w(),t.off(H,D),t.off(F,C),X&&r.$apply(function(){X(r,{$data:U,$event:n})}),oe())}function E(e){z&&r.$apply(function(){z(r,{$data:U,$event:e})})}function w(){G?a.css({transform:"","z-index":"","-webkit-transform":"","-ms-transform":""}):a.css({position:B.position,top:B.top,left:B.left,"z-index":"",width:B.width})}function S(e,n){var t=a.css("width");G?a.css({transform:"matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, "+e+", "+n+", 0, 1)","z-index":99999,"-webkit-transform":"matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, "+e+", "+n+", 0, 1)","-ms-transform":"matrix(1, 0, 0, 1, "+e+", "+n+")"}):a.css({left:e+"px",top:n+"px",position:"fixed","z-index":100,width:t})}function b(){var e=0,n=0,t=function(e){return e.offset()||{left:0,top:0}};if(J){var o=t(ne).left,i=ne.innerWidth(),r=o+i;O-o<Q?e=-Z:r-O<Q&&(e=Z)}if(j){var a=t(ne).top,l=ne.innerHeight(),c=a+l;x-a<Q?n=-Z+30:c-x<Q&&(n=Z-30)}if(0!==e||0!==n){var u=ne.scrollLeft(),p=ne.scrollTop();ne.scrollLeft(u+e),ne.scrollTop(p+n)}}r.value=l.ngDrag;var y,O,x,T,I,R,A,_,L=50,Y=!1,k="ontouchstart"in window||window.DocumentTouch,W="touchstart mousedown",H="touchmove mousemove",F="touchend mouseup",K=r.$id,U=null,N=null,M=!1,P=null,B={},q=n(l.pipDragStart)||null,X=n(l.pipDragStop)||null,z=n(l.pipDragSuccess)||null,G=!!angular.isDefined(l.allowTransform)&&r.$eval(l.allowTransform),V=n(l.pipDragData),j=u(l.pipVerticalScroll)||!0,J=u(l.pipHorizontalScroll)||!0,Q=parseFloat(l.pipActivationDistance)||75,Z=parseFloat(l.pipScrollDistance)||50,ee=!1,ne=angular.element(window),te=n(l.pipScrollContainer),oe=angular.noop;c()}}}]),e.directive("pipDrop",["$parse","$timeout","$window","$document","pipDraggable",function(e,n,t,o,i){return{restrict:"A",link:function(t,i,r){function a(){l(!0)}function l(e){e&&(t.$watch(r.pipDrop,u),t.$on("$destroy",c),t.$on("draggable:start",p),t.$on("draggable:move",s),t.$on("draggable:end",f))}function c(e){l(!1)}function u(e,n){$=e}function p(e,o){$&&(d(o.x,o.y,o.element),r.pipDragStart&&n(function(){C(t,{$data:o.data,$event:o})}))}function s(e,o){$&&(d(o.x,o.y,o.element),r.pipDragMove&&n(function(){w(t,{$data:o.data,$event:o})}))}function f(e,o){return $&&h!==o.uid?(d(o.x,o.y,o.element)&&(o.callback&&o.callback(o),r.pipDropSuccess&&n(function(){D(t,{$data:o.data,$event:o,$target:t.$eval(t.value)})})),r.pipDragStop&&n(function(){E(t,{$data:o.data,$event:o})}),void g(!1,o.element)):void g(!1,o.element)}function d(e,n,o){var r=v(e,n);return t.isTouching=r,r&&(m=i),g(r,o),r}function g(e,n){e?(i.addClass("pip-drag-enter"),n.addClass("pip-drag-over")):m==i&&(m=null,i.removeClass("pip-drag-enter"),n.removeClass("pip-drag-over"))}function v(e,n){var t=i[0].getBoundingClientRect();return e-=o[0].body.scrollLeft+o[0].documentElement.scrollLeft,n-=o[0].body.scrollTop+o[0].documentElement.scrollTop,e>=t.left&&e<=t.right&&n<=t.bottom&&n>=t.top}t.value=r.pipDrop,t.isTouching=!1;var m=null,h=t.$id,$=!1,D=e(r.pipDropSuccess),C=e(r.pipDragStart),E=e(r.pipDragStop),w=e(r.pipDragMove);a()}}}]),e.directive("pipPreventDrag",["$parse","$timeout",function(e,n){return{restrict:"A",link:function(e,n,t){function o(){n.attr("pip-draggable","false"),i(!0)}function i(e){e&&n.on("mousedown touchstart touchmove touchend touchcancel",r)}function r(e){var n=e.originalEvent;return n.preventDefault&&n.preventDefault(),n.stopPropagation&&n.stopPropagation(),n.cancelBubble=!0,n.returnValue=!1,!1}o()}}}]),e.directive("pipCancelDrag",function(){return{restrict:"A",link:function(e,n,t){n.find("*").attr("pip-cancel-drag","pip-cancel-drag")}}})}()},{}],3:[function(e,n,t){!function(){"use strict";var e=angular.module("pipFocused",[]);e.directive("pipFocused",["$timeout","$mdConstant",function(e,n){return{require:"?ngModel",link:function(t,o,i){function r(){var e=u?".pip-focusable":".pip-focusable:visible";l=o.find(e),c=l.length,l.on("focus",function(){o.addClass("pip-focused-container"),$(this).addClass("md-focused")}).on("focusout",function(){o.removeClass("pip-focused-container")})}function a(e){var t=e.which||e.keyCode;if(t==n.KEY_CODE.LEFT_ARROW||t==n.KEY_CODE.UP_ARROW||t==n.KEY_CODE.RIGHT_ARROW||t==n.KEY_CODE.DOWN_ARROW){e.preventDefault();var o=t==n.KEY_CODE.RIGHT_ARROW||t==n.KEY_CODE.DOWN_ARROW?1:-1,i=l.index(l.filter(".md-focused"))+o;i>=0&&i<c&&l[i].focus()}}var l,c,u=i.pipWithHidden;e(r),o.on("keydown",a),t.$watch(i.ngModel,function(){e(r)},!0)}}}])}()},{}],4:[function(e,n,t){!function(){"use strict";var e=angular.module("pipInfiniteScroll",[]);e.directive("pipInfiniteScroll",["$rootScope","$window","$interval","$parse",function(e,n,t,o){var i=500;return{scope:{pipInfiniteScroll:"&",pipScrollContainer:"=",pipScrollDistance:"=",pipScrollDisabled:"=",pipScrollUseDocumentBottom:"=",pipScrollListenForEvent:"@"},link:function(o,r,a){function l(e){return e=e[0]||e,isNaN(e.offsetHeight)?e.document.documentElement.clientHeight:e.offsetHeight}function c(e){if(e[0].getBoundingClientRect&&!e.css("none"))return e[0].getBoundingClientRect().top+u(e)}function u(e){return e=e[0]||e,isNaN(window.pageYOffset)?e.document.documentElement.scrollTop:e.ownerDocument.defaultView.pageYOffset}function p(e){return $=parseFloat(e)||0}function s(e){if(D=!e,D&&m)return m=!1,S()}function f(e){return E=e}function d(e){if(null!=v&&v.unbind("scroll",S),v=e,null!=e)return v.bind("scroll",S)}function g(e){if(null!=e&&0!==e.length){if(e instanceof HTMLElement?e=angular.element(e):"function"==typeof e.append?e=angular.element(e[e.length-1]):"string"==typeof e&&(e=r.parents().find(e)),null!=e&&(!Array.isArray(e)||Array.isArray(e)&&e.length>0))return d(e);throw new Error("Invalid pip-scroll-container attribute.")}}var v,m=null,h=!0,$=null,D=null,C=null,E=!1,w=angular.element(n),S=function(){var n,t,i,a,p;return v===w?(n=l(v)+u(v[0].document.documentElement),i=c(r)+l(r)):(n=l(v),t=0,void 0!==c(v)&&(t=c(v)),i=c(r)-t+l(r)),E&&(i=l((r[0].ownerDocument||r[0].document).documentElement)),a=i-n,p=a<=l(v)*$+1,p?(m=!0,D?o.$$phase||e.$$phase?o.pipInfiniteScroll():o.$apply(o.pipInfiniteScroll):void 0):m=!1};return null!=i&&(S=_.throttle(S,i)),o.$on("$destroy",function(){if(v.unbind("scroll",S),null!=C)return C(),C=null}),o.$watch("pipScrollDistance",p),p(o.pipScrollDistance),o.$watch("pipScrollDisabled",s),s(o.pipScrollDisabled),o.$watch("pipScrollUseDocumentBottom",f),f(o.pipScrollUseDocumentBottom),d(w),o.pipScrollListenForEvent&&(C=e.$on(o.pipScrollListenForEvent,S)),o.$watch("pipScrollContainer",function(e){e!==v&&g(e)}),g(o.pipScrollContainer||[]),null!=a.pipScrollParent&&d(angular.element(r.parent())),null!=a.pipScrolImmediateCheck&&(h=o.$eval(a.pipScrolImmediateCheck)),t(function(){if(h)return S()},0,1)}}}])}()},{}],5:[function(e,n,t){!function(){"use strict";var e=angular.module("pipSelected",[]);e.directive("pipSelected",["$parse","$mdConstant","$timeout",function(e,n,t){return{restrict:"A",scope:!1,link:function(t,o,i){function r(e){return null!=e&&(!!e&&(e=e.toString().toLowerCase(),"1"==e||"true"==e))}function a(e){if(console.log("selectItem"),!w){console.log("selectItem1");var n=e.itemIndex,t=e.itemId,i=e.items||o.find(h+m),r=i.length,a=function(){return e.item?e.item:(void 0===n&&n===-1&&(n=i.index(i.filter("[pip-id="+t+"]"))),n>=0&&n<r?i[n]:void 0)}(),u=e.raiseEvent;console.log("selectItem2"),a&&(console.log("selectItem3"),o.find(h).removeClass("selected md-focused"),a=angular.element(a).addClass("selected md-focused").focus(),v||c(a),u&&l(i))}}function l(e){function n(){var n=angular.element(e[D]),o=n.attr("pip-id");p&&p(t,D),f&&f(t,o),i()}function i(){var n=angular.element(e[D]),i=n.attr("pip-id");d&&d(t,{$event:{target:o,item:n,index:D,id:i,newIndex:D,oldIndex:r}})}var r=D;D=-1;for(var a=0;a<e.length;a++)if($(e[a]).hasClass("selected")){D=a;break}r!=D&&D!==-1?t.$apply(n):t.$apply(i)}function c(e){if(console.log("scrollToItem"),!v){var n=o.offset().top,t=o.height(),i=n+t,r=e.offset().top,a=e.outerHeight(!0),l=r+a,c=o.scrollTop();w=!0,setTimeout(function(){w=!1},100),console.log("scrollToItem containerHeight",t),console.log("scrollToItem itemHeight",a),console.log("scrollToItem1",n,r),console.log("scrollToItem2",i,l),n>r?(console.log("scrollToItem3",c+r-n),o.scrollTop(c+r-n)):i<l&&(console.log("scrollToItem4",c+l-i),o.scrollTop(c+l-i))}}var u=i.pipSelected?e(i.pipSelected):null,p=u?u.assign:null,s=i.pipSelectedId?e(i.pipSelectedId):null,f=s?s.assign:null,d=i.pipSelect?e(i.pipSelect):null,g=i.pipEnterSpacePress?e(i.pipEnterSpacePress):null,v=r(i.pipNoScroll),m=r(i.pipSkipHidden)?":visible":"",h=r(i.pipTreeList)?".pip-selectable-tree":".pip-selectable",D=u(t),C=o.attr("tabindex"),E=i.pipSelectedWatch,w=!1;o.attr("tabindex",C||0),r(i.pipTreeList)?t.$watch(s,function(e){setTimeout(function(){a({itemId:e,raiseEvent:!0})},0)}):t.$watch(u,function(e){a({itemIndex:e})}),E&&t.$watch(E,function(){setTimeout(function(){D=u(t),a({itemIndex:D})},100)}),a({itemIndex:D,items:o.find(h)}),o.on("click touchstart",h,function(e){a({item:e.currentTarget,raiseEvent:!0})}),o.on("keydown",function(e){var i=e.which||e.keyCode;if(i==n.KEY_CODE.ENTER||i==n.KEY_CODE.SPACE)e.preventDefault(),e.stopPropagation(),g&&g(t,{$event:{target:o,index:D,item:o.find(".selected")}});else if(i==n.KEY_CODE.LEFT_ARROW||i==n.KEY_CODE.RIGHT_ARROW||i==n.KEY_CODE.UP_ARROW||i==n.KEY_CODE.DOWN_ARROW){e.preventDefault(),e.stopPropagation();var r=o.find(h+m),l=i==n.KEY_CODE.RIGHT_ARROW||i==n.KEY_CODE.DOWN_ARROW?1:-1,c=D+l;a({itemIndex:c,items:r,raiseEvent:!0})}}),o.on("focusin",function(e){var n,i=o.find(h+".selected");i.addClass("md-focused"),0===i.length&&(D=u(t),n=o.find(h+m),a({itemIndex:D||0,items:n,raiseEvent:!0}))}),o.on("focusout",function(e){o.find(h+".md-focused"+m).removeClass("md-focused")})}}}])}()},{}],6:[function(e,n,t){!function(){"use strict";var e=angular.module("pipUnsavedChanges",[]);e.directive("pipUnsavedChanges",["$window","$rootScope",function(e,n){return{restrict:"AE",scope:{unsavedChangesAvailable:"&pipUnsavedChangesAvailable",unsavedChangesMessage:"@pipUnsavedChangesMessage",afterLeave:"&pipUnsavedChangesAfterLeave",cancelLeave:"&pipUnsavedChangesCancelLeave"},link:function(t){e.onbeforeunload=function(){if(t.unsavedChangesAvailable())return n.$routing=!1,t.unsavedChangesMessage};var o=t.$on("$stateChangeStart",function(o){t.unsavedChangesAvailable()&&!e.confirm(t.unsavedChangesMessage)?(n.$routing=!1,_.isFunction(t.cancelLeave)&&t.cancelLeave(),o.preventDefault()):_.isFunction(t.afterLeave)&&t.afterLeave()});t.$on("$destroy",function(){e.onbeforeunload=null,o()})}}}])}()},{}]},{},[1,2,3,4,5,6])(6)});
//# sourceMappingURL=pip-webui-behaviors.min.js.map
