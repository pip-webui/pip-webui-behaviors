!function(){"use strict";angular.module("pipBehaviors",["pipFocused","pipSelected","pipInfiniteScroll","pipUnsavedChanges","pipDraggable"])}(),function(){"use strict";var e=angular.module("pipDraggable",[]);e.service("pipDraggable",function(){var e=this;e.inputEvent=function(e){return angular.isDefined(e.touches)?e.touches[0]:angular.isDefined(e.originalEvent)&&angular.isDefined(e.originalEvent.touches)?e.originalEvent.touches[0]:e}}),e.directive("pipDrag",["$rootScope","$parse","$document","$window","pipDraggable",function(e,n,t,i,o){return{restrict:"A",link:function(r,a,l){function c(){a.attr("pip-draggable","false");var e;e=a[0].querySelectorAll?angular.element(a[0].querySelectorAll("[pip-drag-handle]")):a.find("[pip-drag-handle]"),e.length&&(I=e),p(!0),ne=ee?angular.element(a.parent()):l.pipScrollContainer?angular.element(te(r)):angular.element(window)}function u(e){return null!=e&&(!!e&&(e=e.toString().toLowerCase(),"1"==e||"true"==e))}function p(e){e&&(r.$on("$destroy",s),r.$watch(l.pipDrag,d),r.$watch(l.pipCenterAnchor,f),I?I.on(W,v):a.on(W,v),L||"img"!=a[0].nodeName.toLowerCase()||a.on("mousedown",function(){return!1}))}function s(e){p(!1)}function d(e,n){U=e}function f(e,n){angular.isDefined(e)&&(k=e||"true")}function g(e){return angular.isDefined(angular.element(e.target).attr("pip-cancel-drag"))}function v(e){U&&(g(e)||"mousedown"==e.type&&0!=e.button||(m(),L?(h(),M=setTimeout(function(){h(),$(e)},Y),t.on(H,h),t.on(K,h)):$(e)))}function m(){B.left=a.css("css")||0,B.top=a.css("top")||0,B.position=a.css("position"),B.width=a.css("width")}function h(){clearTimeout(M),t.off(H,h),t.off(K,h)}function $(n){U&&(n.preventDefault(),O=a[0].getBoundingClientRect(),P=q?O:{left:document.body.scrollLeft,top:document.body.scrollTop},a.centerX=a[0].offsetWidth/2,a.centerY=a[0].offsetHeight/2,y=o.inputEvent(n).pageX,x=o.inputEvent(n).pageY,T=y-O.left,_=x-O.top,k?(R=y-a.centerX-i.pageXOffset,A=x-a.centerY-i.pageYOffset):(R=y-T-i.pageXOffset,A=x-_-i.pageYOffset),t.on(H,D),t.on(K,C),ie=e.$on("draggable:_triggerHandlerMove",function(e,n){D(n)}))}function D(n){U&&(n.preventDefault(),a.hasClass("pip-dragging")||(N=V(r),a.addClass("pip-dragging"),e.$broadcast("draggable:start",{x:y,y:x,tx:R,ty:A,event:n,element:a,data:N}),X&&r.$apply(function(){X(r,{$data:N,$event:n})})),y=o.inputEvent(n).pageX,x=o.inputEvent(n).pageY,(J||j)&&b(),k?(R=y-a.centerX-P.left,A=x-a.centerY-P.top):(R=y-T-P.left,A=x-_-P.top),w(R,A),e.$broadcast("draggable:move",{x:y,y:x,tx:R,ty:A,event:n,element:a,data:N,uid:F,dragOffset:P}))}function C(n){U&&(n.preventDefault(),e.$broadcast("draggable:end",{x:y,y:x,tx:R,ty:A,event:n,element:a,data:N,callback:E,uid:F}),a.removeClass("pip-dragging"),a.parent().find(".pip-drag-enter").removeClass("pip-drag-enter"),S(),t.off(H,D),t.off(K,C),z&&r.$apply(function(){z(r,{$data:N,$event:n})}),ie())}function E(e){G&&r.$apply(function(){G(r,{$data:N,$event:e})})}function S(){q?a.css({transform:"","z-index":"","-webkit-transform":"","-ms-transform":""}):a.css({position:B.position,top:B.top,left:B.left,"z-index":"",width:B.width})}function w(e,n){var t=a.css("width");q?a.css({transform:"matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, "+e+", "+n+", 0, 1)","z-index":99999,"-webkit-transform":"matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, "+e+", "+n+", 0, 1)","-ms-transform":"matrix(1, 0, 0, 1, "+e+", "+n+")"}):a.css({left:e+"px",top:n+"px",position:"fixed","z-index":100,width:t})}function b(){var e=0,n=0,t=function(e){return e.offset()||{left:0,top:0}};if(J){var i=t(ne).left,o=ne.innerWidth(),r=i+o;y-i<Q?e=-Z:r-y<Q&&(e=Z)}if(j){var a=t(ne).top,l=ne.innerHeight(),c=a+l;x-a<Q?n=-Z+30:c-x<Q&&(n=Z-30)}if(0!==e||0!==n){var u=ne.scrollLeft(),p=ne.scrollTop();ne.scrollLeft(u+e),ne.scrollTop(p+n)}}r.value=l.ngDrag;var O,y,x,R,A,T,_,I,Y=50,k=!1,L="ontouchstart"in window||window.DocumentTouch,W="touchstart mousedown",H="touchmove mousemove",K="touchend mouseup",F=r.$id,N=null,P=null,U=!1,M=null,B={},X=n(l.pipDragStart)||null,z=n(l.pipDragStop)||null,G=n(l.pipDragSuccess)||null,q=!!angular.isDefined(l.allowTransform)&&r.$eval(l.allowTransform),V=n(l.pipDragData),j=u(l.pipVerticalScroll)||!0,J=u(l.pipHorizontalScroll)||!0,Q=parseFloat(l.pipActivationDistance)||75,Z=parseFloat(l.pipScrollDistance)||50,ee=!1,ne=angular.element(window),te=n(l.pipScrollContainer),ie=angular.noop;c()}}}]),e.directive("pipDrop",["$parse","$timeout","$window","$document","pipDraggable",function(e,n,t,i,o){return{restrict:"A",link:function(t,o,r){function a(){l(!0)}function l(e){e&&(t.$watch(r.pipDrop,u),t.$on("$destroy",c),t.$on("draggable:start",p),t.$on("draggable:move",s),t.$on("draggable:end",d))}function c(e){l(!1)}function u(e,n){$=e}function p(e,i){$&&(f(i.x,i.y,i.element),r.pipDragStart&&n(function(){C(t,{$data:i.data,$event:i})}))}function s(e,i){$&&(f(i.x,i.y,i.element),r.pipDragMove&&n(function(){S(t,{$data:i.data,$event:i})}))}function d(e,i){return $&&h!==i.uid?(f(i.x,i.y,i.element)&&(i.callback&&i.callback(i),r.pipDropSuccess&&n(function(){D(t,{$data:i.data,$event:i,$target:t.$eval(t.value)})})),r.pipDragStop&&n(function(){E(t,{$data:i.data,$event:i})}),void g(!1,i.element)):void g(!1,i.element)}function f(e,n,i){var r=v(e,n);return t.isTouching=r,r&&(m=o),g(r,i),r}function g(e,n){e?(o.addClass("pip-drag-enter"),n.addClass("pip-drag-over")):m==o&&(m=null,o.removeClass("pip-drag-enter"),n.removeClass("pip-drag-over"))}function v(e,n){var t=o[0].getBoundingClientRect();return e-=i[0].body.scrollLeft+i[0].documentElement.scrollLeft,n-=i[0].body.scrollTop+i[0].documentElement.scrollTop,e>=t.left&&e<=t.right&&n<=t.bottom&&n>=t.top}t.value=r.pipDrop,t.isTouching=!1;var m=null,h=t.$id,$=!1,D=e(r.pipDropSuccess),C=e(r.pipDragStart),E=e(r.pipDragStop),S=e(r.pipDragMove);a()}}}]),e.directive("pipPreventDrag",["$parse","$timeout",function(e,n){return{restrict:"A",link:function(e,n,t){function i(){n.attr("pip-draggable","false"),o(!0)}function o(e){e&&n.on("mousedown touchstart touchmove touchend touchcancel",r)}function r(e){var n=e.originalEvent;return n.preventDefault&&n.preventDefault(),n.stopPropagation&&n.stopPropagation(),n.cancelBubble=!0,n.returnValue=!1,!1}i()}}}]),e.directive("pipCancelDrag",function(){return{restrict:"A",link:function(e,n,t){n.find("*").attr("pip-cancel-drag","pip-cancel-drag")}}})}(),function(){"use strict";var e=angular.module("pipFocused",[]);e.directive("pipFocused",["$timeout","$mdConstant",function(e,n){return{require:"?ngModel",link:function(t,i,o){function r(){var e=u?".pip-focusable":".pip-focusable:visible";l=i.find(e),c=l.length,l.on("focus",function(){i.addClass("pip-focused-container"),$(this).addClass("md-focused")}).on("focusout",function(){i.removeClass("pip-focused-container")})}function a(e){var t=e.which||e.keyCode;if(t==n.KEY_CODE.LEFT_ARROW||t==n.KEY_CODE.UP_ARROW||t==n.KEY_CODE.RIGHT_ARROW||t==n.KEY_CODE.DOWN_ARROW){e.preventDefault();var i=t==n.KEY_CODE.RIGHT_ARROW||t==n.KEY_CODE.DOWN_ARROW?1:-1,o=l.index(l.filter(".md-focused"))+i;o>=0&&o<c&&l[o].focus()}}var l,c,u=o.pipWithHidden;e(r),i.on("keydown",a),t.$watch(o.ngModel,function(){e(r)},!0)}}}])}(),function(){"use strict";var e=angular.module("pipInfiniteScroll",[]);e.directive("pipInfiniteScroll",["$rootScope","$window","$interval","$parse",function(e,n,t,i){var o=500;return{scope:{pipInfiniteScroll:"&",pipScrollContainer:"=",pipScrollDistance:"=",pipScrollDisabled:"=",pipScrollUseDocumentBottom:"=",pipScrollListenForEvent:"@"},link:function(i,r,a){function l(e){return e=e[0]||e,isNaN(e.offsetHeight)?e.document.documentElement.clientHeight:e.offsetHeight}function c(e){if(e[0].getBoundingClientRect&&!e.css("none"))return e[0].getBoundingClientRect().top+u(e)}function u(e){return e=e[0]||e,isNaN(window.pageYOffset)?e.document.documentElement.scrollTop:e.ownerDocument.defaultView.pageYOffset}function p(e){return $=parseFloat(e)||0}function s(e){if(D=!e,D&&m)return m=!1,w()}function d(e){return E=e}function f(e){if(null!=v&&v.unbind("scroll",w),v=e,null!=e)return v.bind("scroll",w)}function g(e){if(null!=e&&0!==e.length){if(e instanceof HTMLElement?e=angular.element(e):"function"==typeof e.append?e=angular.element(e[e.length-1]):"string"==typeof e&&(e=r.parents().find(e)),null!=e&&(!Array.isArray(e)||Array.isArray(e)&&e.length>0))return f(e);throw new Error("Invalid pip-scroll-container attribute.")}}var v,m=null,h=!0,$=null,D=null,C=null,E=!1,S=angular.element(n),w=function(){var n,t,o,a,p;return v===S?(n=l(v)+u(v[0].document.documentElement),o=c(r)+l(r)):(n=l(v),t=0,void 0!==c(v)&&(t=c(v)),o=c(r)-t+l(r)),E&&(o=l((r[0].ownerDocument||r[0].document).documentElement)),a=o-n,p=a<=l(v)*$+1,p?(m=!0,D?i.$$phase||e.$$phase?i.pipInfiniteScroll():i.$apply(i.pipInfiniteScroll):void 0):m=!1};return null!=o&&(w=_.throttle(w,o)),i.$on("$destroy",function(){if(v.unbind("scroll",w),null!=C)return C(),C=null}),i.$watch("pipScrollDistance",p),p(i.pipScrollDistance),i.$watch("pipScrollDisabled",s),s(i.pipScrollDisabled),i.$watch("pipScrollUseDocumentBottom",d),d(i.pipScrollUseDocumentBottom),f(S),i.pipScrollListenForEvent&&(C=e.$on(i.pipScrollListenForEvent,w)),i.$watch("pipScrollContainer",function(e){e!==v&&g(e)}),g(i.pipScrollContainer||[]),null!=a.pipScrollParent&&f(angular.element(r.parent())),null!=a.pipScrolImmediateCheck&&(h=i.$eval(a.pipScrolImmediateCheck)),t(function(){if(h)return w()},0,1)}}}])}(),function(){"use strict";var e=angular.module("pipSelected",[]);e.directive("pipSelected",["$parse","$mdConstant","$timeout",function(e,n,t){return{restrict:"A",scope:!1,link:function(t,i,o){function r(e){return null!=e&&(!!e&&(e=e.toString().toLowerCase(),"1"==e||"true"==e))}function a(e){if(console.log("selectItem"),!S){var n=e.itemIndex,t=e.itemId,o=e.items||i.find(h+m),r=o.length,a=function(){return e.item?e.item:(void 0===n&&n===-1&&(n=o.index(o.filter("[pip-id="+t+"]"))),n>=0&&n<r?o[n]:void 0)}(),u=e.raiseEvent;a&&(i.find(h).removeClass("selected md-focused"),a=angular.element(a).addClass("selected md-focused").focus(),v||c(a),u&&l(o))}}function l(e){function n(){var n=angular.element(e[D]),r=n.attr("pip-id");p&&p(t,D),d&&d(t,r),f&&f(t,{$event:{target:i,item:n,index:D,id:r,newIndex:D,oldIndex:o}})}var o=D;D=-1;for(var r=0;r<e.length;r++)if($(e[r]).hasClass("selected")){D=r;break}o!=D&&D!==-1&&t.$apply(n)}function c(e){if(!v){var n=i.offset().top,t=i.height(),o=n+t,r=e.offset().top,a=e.outerHeight(!0),l=r+a,c=i.scrollTop();S=!0,setTimeout(function(){S=!1},100),n>r?i.scrollTop(c+r-n):o<l&&i.scrollTop(c+l-o)}}var u=o.pipSelected?e(o.pipSelected):null,p=u?u.assign:null,s=o.pipSelectedId?e(o.pipSelectedId):null,d=s?s.assign:null,f=o.pipSelect?e(o.pipSelect):null,g=o.pipEnterSpacePress?e(o.pipEnterSpacePress):null,v=r(o.pipNoScroll),m=r(o.pipSkipHidden)?":visible":"",h=r(o.pipTreeList)?".pip-selectable-tree":".pip-selectable",D=u(t),C=i.attr("tabindex"),E=o.pipSelectedWatch,S=!1;i.attr("tabindex",C||0),r(o.pipTreeList)?t.$watch(s,function(e){setTimeout(function(){a({itemId:e,raiseEvent:!0})},0)}):t.$watch(u,function(e){a({itemIndex:e})}),E&&t.$watch(E,function(){setTimeout(function(){D=u(t),a({itemIndex:D})},100)}),a({itemIndex:D,items:i.find(h)}),i.on("click touchstart",h,function(e){a({item:e.currentTarget,raiseEvent:!0})}),i.on("keydown",function(e){var o=e.which||e.keyCode;if(o==n.KEY_CODE.ENTER||o==n.KEY_CODE.SPACE)e.preventDefault(),e.stopPropagation(),g&&g(t,{$event:{target:i,index:D,item:i.find(".selected")}});else if(o==n.KEY_CODE.LEFT_ARROW||o==n.KEY_CODE.RIGHT_ARROW||o==n.KEY_CODE.UP_ARROW||o==n.KEY_CODE.DOWN_ARROW){e.preventDefault(),e.stopPropagation();var r=i.find(h+m),l=o==n.KEY_CODE.RIGHT_ARROW||o==n.KEY_CODE.DOWN_ARROW?1:-1,c=D+l;a({itemIndex:c,items:r,raiseEvent:!0})}}),i.on("focusin",function(e){var n,o=i.find(h+".selected");o.addClass("md-focused"),0===o.length&&(D=u(t),n=i.find(h+m),a({itemIndex:D||0,items:n,raiseEvent:!0}))}),i.on("focusout",function(e){i.find(h+".md-focused"+m).removeClass("md-focused")})}}}])}(),function(){"use strict";var e=angular.module("pipUnsavedChanges",[]);e.directive("pipUnsavedChanges",["$window","$rootScope",function(e,n){return{restrict:"AE",scope:{unsavedChangesAvailable:"&pipUnsavedChangesAvailable",unsavedChangesMessage:"@pipUnsavedChangesMessage",afterLeave:"&pipUnsavedChangesAfterLeave"},link:function(t){e.onbeforeunload=function(){if(t.unsavedChangesAvailable())return n.$routing=!1,t.unsavedChangesMessage};var i=t.$on("$stateChangeStart",function(i){t.unsavedChangesAvailable()&&!e.confirm(t.unsavedChangesMessage)?(n.$routing=!1,i.preventDefault()):_.isFunction(t.afterLeave)&&t.afterLeave()});t.$on("$destroy",function(){e.onbeforeunload=null,i()})}}}])}();
//# sourceMappingURL=pip-webui-behaviors.min.js.map
