!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var n;n="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,(n.pip||(n.pip={})).behaviors=e()}}(function(){return function e(n,t,i){function o(a,l){if(!t[a]){if(!n[a]){var u="function"==typeof require&&require;if(!l&&u)return u(a,!0);if(r)return r(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var p=t[a]={exports:{}};n[a][0].call(p.exports,function(e){var t=n[a][1][e];return o(t?t:e)},p,p.exports,e,n,t,i)}return t[a].exports}for(var r="function"==typeof require&&require,a=0;a<i.length;a++)o(i[a]);return o}({1:[function(e,n,t){!function(){"use strict";angular.module("pipBehaviors",["pipFocused","pipSelected","pipInfiniteScroll","pipUnsavedChanges","pipDraggable"])}()},{}],2:[function(e,n,t){!function(){"use strict";var e=angular.module("pipDraggable",[]);e.service("pipDraggable",function(){var e=this;e.inputEvent=function(e){return angular.isDefined(e.touches)?e.touches[0]:angular.isDefined(e.originalEvent)&&angular.isDefined(e.originalEvent.touches)?e.originalEvent.touches[0]:e}}),e.directive("pipDrag",["$rootScope","$parse","$document","$window","pipDraggable",function(e,n,t,i,o){return{restrict:"A",link:function(r,a,l){function u(){a.attr("pip-draggable","false");var e;e=a[0].querySelectorAll?angular.element(a[0].querySelectorAll("[pip-drag-handle]")):a.find("[pip-drag-handle]"),e.length&&(I=e),p(!0),ne=ee?angular.element(a.parent()):l.pipScrollContainer?angular.element(te(r)):angular.element(window)}function c(e){return null!=e&&(!!e&&(e=e.toString().toLowerCase(),"1"==e||"true"==e))}function p(e){e&&(r.$on("$destroy",s),r.$watch(l.pipDrag,d),r.$watch(l.pipCenterAnchor,f),I?I.on(Y,v):a.on(Y,v),F||"img"!=a[0].nodeName.toLowerCase()||a.on("mousedown",function(){return!1}))}function s(e){p(!1)}function d(e,n){M=e}function f(e,n){angular.isDefined(e)&&(k=e||"true")}function g(e){return angular.isDefined(angular.element(e.target).attr("pip-cancel-drag"))}function v(e){M&&(g(e)||"mousedown"==e.type&&0!=e.button||(m(),F?(h(),P=setTimeout(function(){h(),$(e)},L),t.on(W,h),t.on(H,h)):$(e)))}function m(){B.left=a.css("css")||0,B.top=a.css("top")||0,B.position=a.css("position"),B.width=a.css("width")}function h(){clearTimeout(P),t.off(W,h),t.off(H,h)}function $(n){M&&(n.preventDefault(),y=a[0].getBoundingClientRect(),N=G?y:{left:document.body.scrollLeft,top:document.body.scrollTop},a.centerX=a[0].offsetWidth/2,a.centerY=a[0].offsetHeight/2,x=o.inputEvent(n).pageX,O=o.inputEvent(n).pageY,_=x-y.left,A=O-y.top,k?(R=x-a.centerX-i.pageXOffset,T=O-a.centerY-i.pageYOffset):(R=x-_-i.pageXOffset,T=O-A-i.pageYOffset),t.on(W,C),t.on(H,D),ie=e.$on("draggable:_triggerHandlerMove",function(e,n){C(n)}))}function C(n){M&&(n.preventDefault(),a.hasClass("pip-dragging")||(U=V(r),a.addClass("pip-dragging"),e.$broadcast("draggable:start",{x:x,y:O,tx:R,ty:T,event:n,element:a,data:U}),q&&r.$apply(function(){q(r,{$data:U,$event:n})})),x=o.inputEvent(n).pageX,O=o.inputEvent(n).pageY,(J||j)&&S(),k?(R=x-a.centerX-N.left,T=O-a.centerY-N.top):(R=x-_-N.left,T=O-A-N.top),E(R,T),e.$broadcast("draggable:move",{x:x,y:O,tx:R,ty:T,event:n,element:a,data:U,uid:K,dragOffset:N}))}function D(n){M&&(n.preventDefault(),e.$broadcast("draggable:end",{x:x,y:O,tx:R,ty:T,event:n,element:a,data:U,callback:b,uid:K}),a.removeClass("pip-dragging"),a.parent().find(".pip-drag-enter").removeClass("pip-drag-enter"),w(),t.off(W,C),t.off(H,D),X&&r.$apply(function(){X(r,{$data:U,$event:n})}),ie())}function b(e){z&&r.$apply(function(){z(r,{$data:U,$event:e})})}function w(){G?a.css({transform:"","z-index":"","-webkit-transform":"","-ms-transform":""}):a.css({position:B.position,top:B.top,left:B.left,"z-index":"",width:B.width})}function E(e,n){var t=a.css("width");G?a.css({transform:"matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, "+e+", "+n+", 0, 1)","z-index":99999,"-webkit-transform":"matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, "+e+", "+n+", 0, 1)","-ms-transform":"matrix(1, 0, 0, 1, "+e+", "+n+")"}):a.css({left:e+"px",top:n+"px",position:"fixed","z-index":100,width:t})}function S(){var e=0,n=0,t=function(e){return e.offset()||{left:0,top:0}};if(J){var i=t(ne).left,o=ne.innerWidth(),r=i+o;x-i<Q?e=-Z:r-x<Q&&(e=Z)}if(j){var a=t(ne).top,l=ne.innerHeight(),u=a+l;O-a<Q?n=-Z+30:u-O<Q&&(n=Z-30)}if(0!==e||0!==n){var c=ne.scrollLeft(),p=ne.scrollTop();ne.scrollLeft(c+e),ne.scrollTop(p+n)}}r.value=l.ngDrag;var y,x,O,R,T,_,A,I,L=50,k=!1,F="ontouchstart"in window||window.DocumentTouch,Y="touchstart mousedown",W="touchmove mousemove",H="touchend mouseup",K=r.$id,U=null,N=null,M=!1,P=null,B={},q=n(l.pipDragStart)||null,X=n(l.pipDragStop)||null,z=n(l.pipDragSuccess)||null,G=!!angular.isDefined(l.allowTransform)&&r.$eval(l.allowTransform),V=n(l.pipDragData),j=c(l.pipVerticalScroll)||!0,J=c(l.pipHorizontalScroll)||!0,Q=parseFloat(l.pipActivationDistance)||75,Z=parseFloat(l.pipScrollDistance)||50,ee=!1,ne=angular.element(window),te=n(l.pipScrollContainer),ie=angular.noop;u()}}}]),e.directive("pipDrop",["$parse","$timeout","$window","$document","pipDraggable",function(e,n,t,i,o){return{restrict:"A",link:function(t,o,r){function a(){l(!0)}function l(e){e&&(t.$watch(r.pipDrop,c),t.$on("$destroy",u),t.$on("draggable:start",p),t.$on("draggable:move",s),t.$on("draggable:end",d))}function u(e){l(!1)}function c(e,n){$=e}function p(e,i){$&&(f(i.x,i.y,i.element),r.pipDragStart&&n(function(){D(t,{$data:i.data,$event:i})}))}function s(e,i){$&&(f(i.x,i.y,i.element),r.pipDragMove&&n(function(){w(t,{$data:i.data,$event:i})}))}function d(e,i){return $&&h!==i.uid?(f(i.x,i.y,i.element)&&(i.callback&&i.callback(i),r.pipDropSuccess&&n(function(){C(t,{$data:i.data,$event:i,$target:t.$eval(t.value)})})),r.pipDragStop&&n(function(){b(t,{$data:i.data,$event:i})}),void g(!1,i.element)):void g(!1,i.element)}function f(e,n,i){var r=v(e,n);return t.isTouching=r,r&&(m=o),g(r,i),r}function g(e,n){e?(o.addClass("pip-drag-enter"),n.addClass("pip-drag-over")):m==o&&(m=null,o.removeClass("pip-drag-enter"),n.removeClass("pip-drag-over"))}function v(e,n){var t=o[0].getBoundingClientRect();return e-=i[0].body.scrollLeft+i[0].documentElement.scrollLeft,n-=i[0].body.scrollTop+i[0].documentElement.scrollTop,e>=t.left&&e<=t.right&&n<=t.bottom&&n>=t.top}t.value=r.pipDrop,t.isTouching=!1;var m=null,h=t.$id,$=!1,C=e(r.pipDropSuccess),D=e(r.pipDragStart),b=e(r.pipDragStop),w=e(r.pipDragMove);a()}}}]),e.directive("pipPreventDrag",["$parse","$timeout",function(e,n){return{restrict:"A",link:function(e,n,t){function i(){n.attr("pip-draggable","false"),o(!0)}function o(e){e&&n.on("mousedown touchstart touchmove touchend touchcancel",r)}function r(e){var n=e.originalEvent;return n.preventDefault&&n.preventDefault(),n.stopPropagation&&n.stopPropagation(),n.cancelBubble=!0,n.returnValue=!1,!1}i()}}}]),e.directive("pipCancelDrag",function(){return{restrict:"A",link:function(e,n,t){n.find("*").attr("pip-cancel-drag","pip-cancel-drag")}}})}()},{}],3:[function(e,n,t){!function(){"use strict";var e=angular.module("pipFocused",[]);e.directive("pipFocused",["$timeout","$mdConstant","$window",function(e,n,t){return{require:"?ngModel",link:function(t,i,o){function r(e){return null!=e&&(!!e&&(e=e.toString().toLowerCase(),"1"==e||"true"==e))}function a(e){if(h)return h;var n=e.split("(")[1].split(")")[0].split(",");if(!n||n.length<3)return"";var t,i,o,r;return r=3==n.length?1:parseFloat(n[3]),t=n[0],i=n[1],o=n[2],r<m?r+=v:r-=v,"rgba("+t+", "+i+", "+o+", "+r+")"}function l(e,n){e.attr("tabindex",n)}function u(e){var n=_.findIndex(e,function(e){return e.tabindex>-1});n==-1&&e.length>0&&l(angular.element(e[0]),D)}function c(){var e=g?".pip-focusable":".pip-focusable:visible";s=i.find(e),d=s.length,u(s),s.on("focus",function(){if(!$(this).hasClass("md-focused"))if(C&&c(),i.addClass("pip-focused-container"),b){angular.element($(this)[0]);f=$(this).css("backgroundColor"),$(this).css("backgroundColor",a(f)),$(this).addClass("md-focused")}else $(this).addClass("md-focused md-focused-opacity")}).on("focusout",function(){$(this).hasClass("md-focused")&&(i.removeClass("pip-focused-container"),b?($(this).css("backgroundColor",""),$(this).removeClass("md-focused md-focused-opacity")):$(this).removeClass("md-focused"))})}function p(e){var t=e.which||e.keyCode;if(t==n.KEY_CODE.LEFT_ARROW||t==n.KEY_CODE.UP_ARROW||t==n.KEY_CODE.RIGHT_ARROW||t==n.KEY_CODE.DOWN_ARROW){e.preventDefault();var i=t==n.KEY_CODE.RIGHT_ARROW||t==n.KEY_CODE.DOWN_ARROW?1:-1,o=s.index(s.filter(".md-focused"))+i;o>=0&&o<d&&s[o].focus()}}var s,d,f,g=o.pipWithHidden,v=.4,m=.5,h=o.pipFocusedColor?o.pipFocusedColor:null,C=o.pipFocusedRebind?o.pipFocusedRebind:null,D=o.pipFocusedTabindex?parseInt(o.pipFocusedTabindex)||0:0,b=!!o.pipFocusedOpacity&&r(o.pipFocusedOpacity);e(c),i.on("keydown",p),o.ngModel&&t.$watch(o.ngModel,function(){e(c)},!0),o.pipFocusedData&&o.$observe("pipFocusedData",function(){e(c)},!0)}}}])}()},{}],4:[function(e,n,t){!function(){"use strict";var e=angular.module("pipInfiniteScroll",[]);e.directive("pipInfiniteScroll",["$rootScope","$window","$interval","$parse",function(e,n,t,i){var o=500;return{scope:{pipInfiniteScroll:"&",pipScrollContainer:"=",pipScrollDistance:"=",pipScrollDisabled:"=",pipScrollUseDocumentBottom:"=",pipScrollListenForEvent:"@"},link:function(i,r,a){function l(e){return e=e[0]||e,isNaN(e.offsetHeight)?e.document.documentElement.clientHeight:e.offsetHeight}function u(e){if(e[0].getBoundingClientRect&&!e.css("none"))return e[0].getBoundingClientRect().top+c(e)}function c(e){return e=e[0]||e,isNaN(window.pageYOffset)?e.document.documentElement.scrollTop:e.ownerDocument.defaultView.pageYOffset}function p(e){return $=parseFloat(e)||0}function s(e){if(C=!e,C&&m)return m=!1,E()}function d(e){return b=e}function f(e){if(null!=v&&v.unbind("scroll",E),v=e,null!=e)return v.bind("scroll",E)}function g(e){if(null!=e&&0!==e.length){if(e instanceof HTMLElement?e=angular.element(e):"function"==typeof e.append?e=angular.element(e[e.length-1]):"string"==typeof e&&(e=r.parents().find(e)),null!=e&&(!Array.isArray(e)||Array.isArray(e)&&e.length>0))return f(e);throw new Error("Invalid pip-scroll-container attribute.")}}var v,m=null,h=!0,$=null,C=null,D=null,b=!1,w=angular.element(n),E=function(){var n,t,o,a,p;return v===w?(n=l(v)+c(v[0].document.documentElement),o=u(r)+l(r)):(n=l(v),t=0,void 0!==u(v)&&(t=u(v)),o=u(r)-t+l(r)),b&&(o=l((r[0].ownerDocument||r[0].document).documentElement)),a=o-n,p=a<=l(v)*$+1,p?(m=!0,C?i.$$phase||e.$$phase?i.pipInfiniteScroll():i.$apply(i.pipInfiniteScroll):void 0):m=!1};return null!=o&&(E=_.throttle(E,o)),i.$on("$destroy",function(){if(v.unbind("scroll",E),null!=D)return D(),D=null}),i.$watch("pipScrollDistance",p),p(i.pipScrollDistance),i.$watch("pipScrollDisabled",s),s(i.pipScrollDisabled),i.$watch("pipScrollUseDocumentBottom",d),d(i.pipScrollUseDocumentBottom),f(w),i.pipScrollListenForEvent&&(D=e.$on(i.pipScrollListenForEvent,E)),i.$watch("pipScrollContainer",function(e){e!==v&&g(e)}),g(i.pipScrollContainer||[]),null!=a.pipScrollParent&&f(angular.element(r.parent())),null!=a.pipScrolImmediateCheck&&(h=i.$eval(a.pipScrolImmediateCheck)),t(function(){if(h)return E()},0,1)}}}])}()},{}],5:[function(e,n,t){!function(){"use strict";var e=angular.module("pipSelected",[]);e.directive("pipSelected",["$parse","$mdConstant","$timeout",function(e,n,t){return{restrict:"A",scope:!1,link:function(t,i,o){function r(e){return null!=e&&(!!e&&(e=e.toString().toLowerCase(),"1"==e||"true"==e))}function a(e){if(!w){var n=e.itemIndex,t=e.itemId,o=e.items||i.find(h+m),r=o.length,a=function(){return e.item?e.item:(void 0===n&&n===-1&&(n=o.index(o.filter("[pip-id="+t+"]"))),n>=0&&n<r?o[n]:void 0)}(),c=e.raiseEvent;a&&(i.find(h).removeClass("selected md-focused"),a=angular.element(a).addClass("selected md-focused").focus(),v||u(a),c&&l(o))}}function l(e){function n(){var n=angular.element(e[C]),i=n.attr("pip-id");p&&p(t,C),d&&d(t,i),o()}function o(){var n=angular.element(e[C]),o=n.attr("pip-id");f&&f(t,{$event:{target:i,item:n,index:C,id:o,newIndex:C,oldIndex:r}})}var r=C;C=-1;for(var a=0;a<e.length;a++)if($(e[a]).hasClass("selected")){C=a;break}r!=C&&C!==-1?t.$apply(n):t.$apply(o)}function u(e){if(!v){var n=i.offset().top,t=i.height(),o=n+t,r=e.offset().top,a=e.outerHeight(!0),l=r+a,u=i.scrollTop();w=!0,setTimeout(function(){w=!1},100),n>r?i.scrollTop(u+r-n):o<l&&i.scrollTop(u+l-o)}}var c=o.pipSelected?e(o.pipSelected):null,p=c?c.assign:null,s=o.pipSelectedId?e(o.pipSelectedId):null,d=s?s.assign:null,f=o.pipSelect?e(o.pipSelect):null,g=o.pipEnterSpacePress?e(o.pipEnterSpacePress):null,v=r(o.pipNoScroll),m=r(o.pipSkipHidden)?":visible":"",h=r(o.pipTreeList)?".pip-selectable-tree":".pip-selectable",C=c(t),D=i.attr("tabindex"),b=o.pipSelectedWatch,w=!1;i.attr("tabindex",D||0),r(o.pipTreeList)?t.$watch(s,function(e){setTimeout(function(){a({itemId:e,raiseEvent:!0})},0)}):t.$watch(c,function(e){a({itemIndex:e})}),b&&t.$watch(b,function(){setTimeout(function(){C=c(t),a({itemIndex:C})},100)}),a({itemIndex:C,items:i.find(h)}),i.on("click touchstart",h,function(e){a({item:e.currentTarget,raiseEvent:!0})}),i.on("keydown",function(e){var o=e.which||e.keyCode;if(o==n.KEY_CODE.ENTER||o==n.KEY_CODE.SPACE)e.preventDefault(),e.stopPropagation(),g&&g(t,{$event:{target:i,index:C,item:i.find(".selected")}});else if(o==n.KEY_CODE.LEFT_ARROW||o==n.KEY_CODE.RIGHT_ARROW||o==n.KEY_CODE.UP_ARROW||o==n.KEY_CODE.DOWN_ARROW){e.preventDefault(),e.stopPropagation();var r=i.find(h+m),l=o==n.KEY_CODE.RIGHT_ARROW||o==n.KEY_CODE.DOWN_ARROW?1:-1,u=C+l;a({itemIndex:u,items:r,raiseEvent:!0})}}),i.on("focusin",function(e){var n,o=i.find(h+".selected");o.addClass("md-focused"),0===o.length&&(C=c(t),n=i.find(h+m),a({itemIndex:C||0,items:n,raiseEvent:!0}))}),i.on("focusout",function(e){i.find(h+".md-focused"+m).removeClass("md-focused")})}}}])}()},{}],6:[function(e,n,t){!function(){"use strict";var e=angular.module("pipUnsavedChanges",[]);e.directive("pipUnsavedChanges",["$window","$rootScope",function(e,n){return{restrict:"AE",scope:{unsavedChangesAvailable:"&pipUnsavedChangesAvailable",unsavedChangesMessage:"@pipUnsavedChangesMessage",afterLeave:"&pipUnsavedChangesAfterLeave",cancelLeave:"&pipUnsavedChangesCancelLeave"},link:function(t){e.onbeforeunload=function(){if(t.unsavedChangesAvailable())return n.$routing=!1,t.unsavedChangesMessage};var i=t.$on("$stateChangeStart",function(i){t.unsavedChangesAvailable()&&!e.confirm(t.unsavedChangesMessage)?(n.$routing=!1,_.isFunction(t.cancelLeave)&&t.cancelLeave(),i.preventDefault()):_.isFunction(t.afterLeave)&&t.afterLeave()});t.$on("$destroy",function(){e.onbeforeunload=null,i()})}}}])}()},{}]},{},[1,2,3,4,5,6])(6)});
//# sourceMappingURL=pip-webui-behaviors.min.js.map
