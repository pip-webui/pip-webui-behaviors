!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var n;n="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,(n.pip||(n.pip={})).behaviors=e()}}(function(){return function e(n,t,i){function o(r,l){if(!t[r]){if(!n[r]){var c="function"==typeof require&&require;if(!l&&c)return c(r,!0);if(a)return a(r,!0);var u=new Error("Cannot find module '"+r+"'");throw u.code="MODULE_NOT_FOUND",u}var p=t[r]={exports:{}};n[r][0].call(p.exports,function(e){var t=n[r][1][e];return o(t?t:e)},p,p.exports,e,n,t,i)}return t[r].exports}for(var a="function"==typeof require&&require,r=0;r<i.length;r++)o(i[r]);return o}({1:[function(e,n,t){!function(){"use strict";angular.module("pipBehaviors",["pipFocused","pipSelected","pipInfiniteScroll","pipUnsavedChanges","pipDraggable"])}()},{}],2:[function(e,n,t){!function(){"use strict";var e=angular.module("pipDraggable",[]);e.service("pipDraggable",function(){var e=this;e.inputEvent=function(e){return angular.isDefined(e.touches)?e.touches[0]:angular.isDefined(e.originalEvent)&&angular.isDefined(e.originalEvent.touches)?e.originalEvent.touches[0]:e}}),e.directive("pipDrag",["$rootScope","$parse","$document","$window","pipDraggable",function(e,n,t,i,o){return{restrict:"A",link:function(a,r,l){function c(){r.attr("pip-draggable","false");var e;e=r[0].querySelectorAll?angular.element(r[0].querySelectorAll("[pip-drag-handle]")):r.find("[pip-drag-handle]"),e.length&&(I=e),p(!0),ne=ee?angular.element(r.parent()):l.pipScrollContainer?angular.element(te(a)):angular.element(window)}function u(e){return null!=e&&(!!e&&(e=e.toString().toLowerCase(),"1"==e||"true"==e))}function p(e){e&&(a.$on("$destroy",s),a.$watch(l.pipDrag,d),a.$watch(l.pipCenterAnchor,f),I?I.on(Y,v):r.on(Y,v),F||"img"!=r[0].nodeName.toLowerCase()||r.on("mousedown",function(){return!1}))}function s(e){p(!1)}function d(e,n){N=e}function f(e,n){angular.isDefined(e)&&(k=e||"true")}function g(e){return angular.isDefined(angular.element(e.target).attr("pip-cancel-drag"))}function v(e){N&&(g(e)||"mousedown"==e.type&&0!=e.button||(m(),F?(h(),P=setTimeout(function(){h(),$(e)},L),t.on(W,h),t.on(M,h)):$(e)))}function m(){B.left=r.css("css")||0,B.top=r.css("top")||0,B.position=r.css("position"),B.width=r.css("width")}function h(){clearTimeout(P),t.off(W,h),t.off(M,h)}function $(n){N&&(n.preventDefault(),y=r[0].getBoundingClientRect(),U=G?y:{left:document.body.scrollLeft,top:document.body.scrollTop},r.centerX=r[0].offsetWidth/2,r.centerY=r[0].offsetHeight/2,x=o.inputEvent(n).pageX,O=o.inputEvent(n).pageY,T=x-y.left,_=O-y.top,k?(R=x-r.centerX-i.pageXOffset,A=O-r.centerY-i.pageYOffset):(R=x-T-i.pageXOffset,A=O-_-i.pageYOffset),t.on(W,D),t.on(M,C),ie=e.$on("draggable:_triggerHandlerMove",function(e,n){D(n)}))}function D(n){N&&(n.preventDefault(),r.hasClass("pip-dragging")||(K=V(a),r.addClass("pip-dragging"),e.$broadcast("draggable:start",{x:x,y:O,tx:R,ty:A,event:n,element:r,data:K}),q&&a.$apply(function(){q(a,{$data:K,$event:n})})),x=o.inputEvent(n).pageX,O=o.inputEvent(n).pageY,(J||j)&&S(),k?(R=x-r.centerX-U.left,A=O-r.centerY-U.top):(R=x-T-U.left,A=O-_-U.top),E(R,A),e.$broadcast("draggable:move",{x:x,y:O,tx:R,ty:A,event:n,element:r,data:K,uid:H,dragOffset:U}))}function C(n){N&&(n.preventDefault(),e.$broadcast("draggable:end",{x:x,y:O,tx:R,ty:A,event:n,element:r,data:K,callback:w,uid:H}),r.removeClass("pip-dragging"),r.parent().find(".pip-drag-enter").removeClass("pip-drag-enter"),b(),t.off(W,D),t.off(M,C),X&&a.$apply(function(){X(a,{$data:K,$event:n})}),ie())}function w(e){z&&a.$apply(function(){z(a,{$data:K,$event:e})})}function b(){G?r.css({transform:"","z-index":"","-webkit-transform":"","-ms-transform":""}):r.css({position:B.position,top:B.top,left:B.left,"z-index":"",width:B.width})}function E(e,n){var t=r.css("width");G?r.css({transform:"matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, "+e+", "+n+", 0, 1)","z-index":99999,"-webkit-transform":"matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, "+e+", "+n+", 0, 1)","-ms-transform":"matrix(1, 0, 0, 1, "+e+", "+n+")"}):r.css({left:e+"px",top:n+"px",position:"fixed","z-index":100,width:t})}function S(){var e=0,n=0,t=function(e){return e.offset()||{left:0,top:0}};if(J){var i=t(ne).left,o=ne.innerWidth(),a=i+o;x-i<Q?e=-Z:a-x<Q&&(e=Z)}if(j){var r=t(ne).top,l=ne.innerHeight(),c=r+l;O-r<Q?n=-Z+30:c-O<Q&&(n=Z-30)}if(0!==e||0!==n){var u=ne.scrollLeft(),p=ne.scrollTop();ne.scrollLeft(u+e),ne.scrollTop(p+n)}}a.value=l.ngDrag;var y,x,O,R,A,T,_,I,L=50,k=!1,F="ontouchstart"in window||window.DocumentTouch,Y="touchstart mousedown",W="touchmove mousemove",M="touchend mouseup",H=a.$id,K=null,U=null,N=!1,P=null,B={},q=n(l.pipDragStart)||null,X=n(l.pipDragStop)||null,z=n(l.pipDragSuccess)||null,G=!!angular.isDefined(l.allowTransform)&&a.$eval(l.allowTransform),V=n(l.pipDragData),j=u(l.pipVerticalScroll)||!0,J=u(l.pipHorizontalScroll)||!0,Q=parseFloat(l.pipActivationDistance)||75,Z=parseFloat(l.pipScrollDistance)||50,ee=!1,ne=angular.element(window),te=n(l.pipScrollContainer),ie=angular.noop;c()}}}]),e.directive("pipDrop",["$parse","$timeout","$window","$document","pipDraggable",function(e,n,t,i,o){return{restrict:"A",link:function(t,o,a){function r(){l(!0)}function l(e){e&&(t.$watch(a.pipDrop,u),t.$on("$destroy",c),t.$on("draggable:start",p),t.$on("draggable:move",s),t.$on("draggable:end",d))}function c(e){l(!1)}function u(e,n){$=e}function p(e,i){$&&(f(i.x,i.y,i.element),a.pipDragStart&&n(function(){C(t,{$data:i.data,$event:i})}))}function s(e,i){$&&(f(i.x,i.y,i.element),a.pipDragMove&&n(function(){b(t,{$data:i.data,$event:i})}))}function d(e,i){return $&&h!==i.uid?(f(i.x,i.y,i.element)&&(i.callback&&i.callback(i),a.pipDropSuccess&&n(function(){D(t,{$data:i.data,$event:i,$target:t.$eval(t.value)})})),a.pipDragStop&&n(function(){w(t,{$data:i.data,$event:i})}),void g(!1,i.element)):void g(!1,i.element)}function f(e,n,i){var a=v(e,n);return t.isTouching=a,a&&(m=o),g(a,i),a}function g(e,n){e?(o.addClass("pip-drag-enter"),n.addClass("pip-drag-over")):m==o&&(m=null,o.removeClass("pip-drag-enter"),n.removeClass("pip-drag-over"))}function v(e,n){var t=o[0].getBoundingClientRect();return e-=i[0].body.scrollLeft+i[0].documentElement.scrollLeft,n-=i[0].body.scrollTop+i[0].documentElement.scrollTop,e>=t.left&&e<=t.right&&n<=t.bottom&&n>=t.top}t.value=a.pipDrop,t.isTouching=!1;var m=null,h=t.$id,$=!1,D=e(a.pipDropSuccess),C=e(a.pipDragStart),w=e(a.pipDragStop),b=e(a.pipDragMove);r()}}}]),e.directive("pipPreventDrag",["$parse","$timeout",function(e,n){return{restrict:"A",link:function(e,n,t){function i(){n.attr("pip-draggable","false"),o(!0)}function o(e){e&&n.on("mousedown touchstart touchmove touchend touchcancel",a)}function a(e){var n=e.originalEvent;return n.preventDefault&&n.preventDefault(),n.stopPropagation&&n.stopPropagation(),n.cancelBubble=!0,n.returnValue=!1,!1}i()}}}]),e.directive("pipCancelDrag",function(){return{restrict:"A",link:function(e,n,t){n.find("*").attr("pip-cancel-drag","pip-cancel-drag")}}})}()},{}],3:[function(e,n,t){!function(){"use strict";var e=angular.module("pipFocused",[]);e.directive("pipFocused",["$timeout","$mdConstant","$window",function(e,n,t){return{restrict:"A",require:"?ngModel",scope:{focusedData:"=?pipFocusedData",ngModel:"=?ngModel"},link:function(t,i,o){function a(e){return null!=e&&(!!e&&(e=e.toString().toLowerCase(),"1"==e||"true"==e))}function r(e){if(h)return h;var n=e.split("(")[1].split(")")[0].split(",");if(!n||n.length<3)return"";var t,i,o,a;return a=3==n.length?1:parseFloat(n[3]),t=n[0],i=n[1],o=n[2],a<m?a+=v:a-=v,"rgba("+t+", "+i+", "+o+", "+a+")"}function l(e,n){e.attr("tabindex",n)}function c(e){var n=_.findIndex(e,function(e){return e.tabindex>-1});n==-1&&e.length>0&&l(angular.element(e[0]),C)}function u(){var e=g?".pip-focusable":".pip-focusable:visible";s=i.find(e),d=s.length,c(s),s.on("focus",function(){if(!$(this).hasClass("md-focused"))if(D&&u(),i.addClass("pip-focused-container"),w){angular.element($(this)[0]);f=$(this).css("backgroundColor"),$(this).css("backgroundColor",r(f)),$(this).addClass("md-focused")}else $(this).addClass("md-focused md-focused-opacity")}).on("focusout",function(){$(this).hasClass("md-focused")&&(i.removeClass("pip-focused-container"),w?($(this).css("backgroundColor",""),$(this).removeClass("md-focused md-focused-opacity")):$(this).removeClass("md-focused"))})}function p(e){var t=e.which||e.keyCode;if(t==n.KEY_CODE.LEFT_ARROW||t==n.KEY_CODE.UP_ARROW||t==n.KEY_CODE.RIGHT_ARROW||t==n.KEY_CODE.DOWN_ARROW){e.preventDefault();var i=t==n.KEY_CODE.RIGHT_ARROW||t==n.KEY_CODE.DOWN_ARROW?1:-1,o=s.index(s.filter(".md-focused"))+i;o>=0&&o<d&&s[o].focus()}}var s,d,f,g=o.pipWithHidden,v=.4,m=.5,h=o.pipFocusedColor?o.pipFocusedColor:null,D=o.pipFocusedRebind?o.pipFocusedRebind:null,C=o.pipFocusedTabindex?parseInt(o.pipFocusedTabindex)||0:0,w=!!o.pipFocusedOpacity&&a(o.pipFocusedOpacity);e(u),i.on("keydown",p),console.log("$attrs.",o.pipData),console.log("$scope.ngModel",t.ngModel),console.log("$scope.focusedData",t.focusedData),t.ngModel&&t.$watch(o.ngModel,function(){console.log("watch $scope.ngModel",t.ngModel),e(u)},!0),t.focusedData&&t.$watch(t.focusedData,function(){console.log("watch $scope.focusedData",t.focusedData),e(u)},!0)}}}])}()},{}],4:[function(e,n,t){!function(){"use strict";var e=angular.module("pipInfiniteScroll",[]);e.directive("pipInfiniteScroll",["$rootScope","$window","$interval","$parse",function(e,n,t,i){var o=500;return{scope:{pipInfiniteScroll:"&",pipScrollContainer:"=",pipScrollDistance:"=",pipScrollDisabled:"=",pipScrollUseDocumentBottom:"=",pipScrollListenForEvent:"@"},link:function(i,a,r){function l(e){return e=e[0]||e,isNaN(e.offsetHeight)?e.document.documentElement.clientHeight:e.offsetHeight}function c(e){if(e[0].getBoundingClientRect&&!e.css("none"))return e[0].getBoundingClientRect().top+u(e)}function u(e){return e=e[0]||e,isNaN(window.pageYOffset)?e.document.documentElement.scrollTop:e.ownerDocument.defaultView.pageYOffset}function p(e){return $=parseFloat(e)||0}function s(e){if(D=!e,D&&m)return m=!1,E()}function d(e){return w=e}function f(e){if(null!=v&&v.unbind("scroll",E),v=e,null!=e)return v.bind("scroll",E)}function g(e){if(null!=e&&0!==e.length){if(e instanceof HTMLElement?e=angular.element(e):"function"==typeof e.append?e=angular.element(e[e.length-1]):"string"==typeof e&&(e=a.parents().find(e)),null!=e&&(!Array.isArray(e)||Array.isArray(e)&&e.length>0))return f(e);throw new Error("Invalid pip-scroll-container attribute.")}}var v,m=null,h=!0,$=null,D=null,C=null,w=!1,b=angular.element(n),E=function(){var n,t,o,r,p;return v===b?(n=l(v)+u(v[0].document.documentElement),o=c(a)+l(a)):(n=l(v),t=0,void 0!==c(v)&&(t=c(v)),o=c(a)-t+l(a)),w&&(o=l((a[0].ownerDocument||a[0].document).documentElement)),r=o-n,p=r<=l(v)*$+1,p?(m=!0,D?i.$$phase||e.$$phase?i.pipInfiniteScroll():i.$apply(i.pipInfiniteScroll):void 0):m=!1};return null!=o&&(E=_.throttle(E,o)),i.$on("$destroy",function(){if(v.unbind("scroll",E),null!=C)return C(),C=null}),i.$watch("pipScrollDistance",p),p(i.pipScrollDistance),i.$watch("pipScrollDisabled",s),s(i.pipScrollDisabled),i.$watch("pipScrollUseDocumentBottom",d),d(i.pipScrollUseDocumentBottom),f(b),i.pipScrollListenForEvent&&(C=e.$on(i.pipScrollListenForEvent,E)),i.$watch("pipScrollContainer",function(e){e!==v&&g(e)}),g(i.pipScrollContainer||[]),null!=r.pipScrollParent&&f(angular.element(a.parent())),null!=r.pipScrolImmediateCheck&&(h=i.$eval(r.pipScrolImmediateCheck)),t(function(){if(h)return E()},0,1)}}}])}()},{}],5:[function(e,n,t){!function(){"use strict";var e=angular.module("pipSelected",[]);e.directive("pipSelected",["$parse","$mdConstant","$timeout",function(e,n,t){return{restrict:"A",scope:!1,link:function(t,i,o){function a(e){return null!=e&&(!!e&&(e=e.toString().toLowerCase(),"1"==e||"true"==e))}function r(e){if(!b){var n=e.itemIndex,t=e.itemId,o=e.items||i.find(h+m),a=o.length,r=function(){return e.item?e.item:(void 0===n&&n===-1&&(n=o.index(o.filter("[pip-id="+t+"]"))),n>=0&&n<a?o[n]:void 0)}(),u=e.raiseEvent;r&&(i.find(h).removeClass("selected md-focused"),r=angular.element(r).addClass("selected md-focused").focus(),v||c(r),u&&l(o))}}function l(e){function n(){var n=angular.element(e[D]),i=n.attr("pip-id");p&&p(t,D),d&&d(t,i),o()}function o(){var n=angular.element(e[D]),o=n.attr("pip-id");f&&f(t,{$event:{target:i,item:n,index:D,id:o,newIndex:D,oldIndex:a}})}var a=D;D=-1;for(var r=0;r<e.length;r++)if($(e[r]).hasClass("selected")){D=r;break}a!=D&&D!==-1?t.$apply(n):t.$apply(o)}function c(e){if(!v){var n=i.offset().top,t=i.height(),o=n+t,a=e.offset().top,r=e.outerHeight(!0),l=a+r,c=i.scrollTop();b=!0,setTimeout(function(){b=!1},100),n>a?i.scrollTop(c+a-n):o<l&&i.scrollTop(c+l-o)}}var u=o.pipSelected?e(o.pipSelected):null,p=u?u.assign:null,s=o.pipSelectedId?e(o.pipSelectedId):null,d=s?s.assign:null,f=o.pipSelect?e(o.pipSelect):null,g=o.pipEnterSpacePress?e(o.pipEnterSpacePress):null,v=a(o.pipNoScroll),m=a(o.pipSkipHidden)?":visible":"",h=a(o.pipTreeList)?".pip-selectable-tree":".pip-selectable",D=u(t),C=i.attr("tabindex"),w=o.pipSelectedWatch,b=!1;i.attr("tabindex",C||0),a(o.pipTreeList)?t.$watch(s,function(e){setTimeout(function(){r({itemId:e,raiseEvent:!0})},0)}):t.$watch(u,function(e){r({itemIndex:e})}),w&&t.$watch(w,function(){setTimeout(function(){D=u(t),r({itemIndex:D})},100)}),r({itemIndex:D,items:i.find(h)}),i.on("click touchstart",h,function(e){r({item:e.currentTarget,raiseEvent:!0})}),i.on("keydown",function(e){var o=e.which||e.keyCode;if(o==n.KEY_CODE.ENTER||o==n.KEY_CODE.SPACE)e.preventDefault(),e.stopPropagation(),g&&g(t,{$event:{target:i,index:D,item:i.find(".selected")}});else if(o==n.KEY_CODE.LEFT_ARROW||o==n.KEY_CODE.RIGHT_ARROW||o==n.KEY_CODE.UP_ARROW||o==n.KEY_CODE.DOWN_ARROW){e.preventDefault(),e.stopPropagation();var a=i.find(h+m),l=o==n.KEY_CODE.RIGHT_ARROW||o==n.KEY_CODE.DOWN_ARROW?1:-1,c=D+l;r({itemIndex:c,items:a,raiseEvent:!0})}}),i.on("focusin",function(e){var n,o=i.find(h+".selected");o.addClass("md-focused"),0===o.length&&(D=u(t),n=i.find(h+m),r({itemIndex:D||0,items:n,raiseEvent:!0}))}),i.on("focusout",function(e){i.find(h+".md-focused"+m).removeClass("md-focused")})}}}])}()},{}],6:[function(e,n,t){!function(){"use strict";var e=angular.module("pipUnsavedChanges",[]);e.directive("pipUnsavedChanges",["$window","$rootScope",function(e,n){return{restrict:"AE",scope:{unsavedChangesAvailable:"&pipUnsavedChangesAvailable",unsavedChangesMessage:"@pipUnsavedChangesMessage",afterLeave:"&pipUnsavedChangesAfterLeave",cancelLeave:"&pipUnsavedChangesCancelLeave"},link:function(t){e.onbeforeunload=function(){if(t.unsavedChangesAvailable())return n.$routing=!1,t.unsavedChangesMessage};var i=t.$on("$stateChangeStart",function(i){t.unsavedChangesAvailable()&&!e.confirm(t.unsavedChangesMessage)?(n.$routing=!1,_.isFunction(t.cancelLeave)&&t.cancelLeave(),i.preventDefault()):_.isFunction(t.afterLeave)&&t.afterLeave()});t.$on("$destroy",function(){e.onbeforeunload=null,i()})}}}])}()},{}]},{},[1,2,3,4,5,6])(6)});
//# sourceMappingURL=pip-webui-behaviors.min.js.map
