!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,(e.pip||(e.pip={})).behaviors=t()}}(function(){return function t(e,i,n){function o(r,a){if(!i[r]){if(!e[r]){var c="function"==typeof require&&require;if(!a&&c)return c(r,!0);if(s)return s(r,!0);var l=new Error("Cannot find module '"+r+"'");throw l.code="MODULE_NOT_FOUND",l}var h=i[r]={exports:{}};e[r][0].call(h.exports,function(t){var i=e[r][1][t];return o(i||t)},h,h.exports,t,e,i,n)}return i[r].exports}for(var s="function"==typeof require&&require,r=0;r<n.length;r++)o(n[r]);return o}({1:[function(t,e,i){var n=function(){function t(t){t.find("*").attr("pip-cancel-drag","pip-cancel-drag")}return t}(),o=function(){return{restrict:"A",link:function(t,e,i){new n(e)}}};angular.module("pipDraggable").directive("pipCancelDrag",o)},{}],2:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function t(t,e,i,n,o,s,r,a){this.$rootScope=t,this.$parse=e,this.$document=i,this.$window=n,this.pipDraggable=o,this.$scope=s,this.$element=r,this.$attrs=a,this.LONG_PRESS=50,this._centerAnchor=!1,this._hasTouch="ontouchstart"in window||window.DocumentTouch,this._pressEvents="touchstart mousedown",this._moveEvents="touchmove mousemove",this._releaseEvents="touchend mouseup",this._data=null,this._dragOffset=null,this._dragEnabled=!1,this._pressTimer=null,this._elementStyle={},this.scrollParent=!1,this.scrollContainer=angular.element(window),this._deregisterRootMoveListener=angular.noop,s.value=a.ngDrag,this._myid=s.$id,this.onDragStartCallback=e(a.pipDragStart)||null,this.onDragMoveCallbak=e(a.pipDragMove)||null,this.onDragStopCallback=e(a.pipDragStop)||null,this.onDragSuccessCallback=e(a.pipDragSuccess)||null,this.allowTransform=!!angular.isDefined(a.allowTransform)&&s.$eval(a.allowTransform),this.getDragData=e(a.pipDragData),this.verticalScroll=a.pipVerticalScroll||!0,this.horizontalScroll=a.pipHorizontalScroll||!0,this.activationDistance=parseFloat(a.pipActivationDistance)||75,this.scrollDistance=parseFloat(a.pipActivationDistance)||50,this.scrollContainerGetter=e(a.pipScrollContainer),this.$element.css("cursor","move"),this.initialize()}return t.prototype.initialize=function(){this.$element.attr("pip-draggable","false");var t;t=this.$element[0].querySelectorAll?angular.element(this.$element[0].querySelectorAll("[pip-drag-handle]")):this.$element.find("[pip-drag-handle]"),t.length&&(this._dragHandle=t),this.toggleListeners(!0),this.scrollParent?this.scrollContainer=angular.element(this.$element.parent()):this.$attrs.pipScrollContainer?this.scrollContainer=angular.element(this.scrollContainerGetter(this.$scope)):this.scrollContainer=angular.element(window)},t.prototype.toggleListeners=function(t){var e=this;t&&(this.$scope.$on("$destroy",function(){e.onDestroy(t)}),this.$scope.$watch(this.$attrs.pipDrag,function(t,i){e.onEnableChange(t,i)}),this.$scope.$watch(this.$attrs.pipCenterAnchor,function(t,i){e.onCenterAnchor(t,i)}),this._dragHandle?this._dragHandle.on(this._pressEvents,function(t){e.onpress(t)}):this.$element.on(this._pressEvents,function(t){e.onpress(t)}),this._hasTouch||"img"!=this.$element[0].nodeName.toLowerCase()||this.$element.on("mousedown",function(){return!1}))},t.prototype.onDestroy=function(t){this.toggleListeners(!1)},t.prototype.onEnableChange=function(t,e){this._dragEnabled=t},t.prototype.onCenterAnchor=function(t,e){angular.isDefined(t)&&(this._centerAnchor=t||"true")},t.prototype.isClickableElement=function(t){return angular.isDefined(angular.element(t.target).attr("pip-cancel-drag"))},t.prototype.onpress=function(t){var e=this;this._dragEnabled&&(this.isClickableElement(t)||"mousedown"==t.type&&0!=t.button||(this.saveElementStyles(),this._hasTouch?(this.cancelPress(),this._pressTimer=setTimeout(function(){e.cancelPress(),e.onlongpress(t)},this.LONG_PRESS),this.$document.on(this._moveEvents,function(){e.cancelPress()}),this.$document.on(this._releaseEvents,function(){e.cancelPress()})):this.onlongpress(t)))},t.prototype.saveElementStyles=function(){this._elementStyle.left=this.$element.css("left")||0,this._elementStyle.top=this.$element.css("top")||0,this._elementStyle.position=this.$element.css("position"),this._elementStyle.width=this.$element.css("width")},t.prototype.cancelPress=function(){var t=this;clearTimeout(this._pressTimer),this.$document.off(this._moveEvents,function(){t.cancelPress()}),this.$document.off(this._releaseEvents,function(){t.cancelPress()})},t.prototype.onlongpress=function(t){var e=this;this._dragEnabled&&(t.preventDefault(),this.offset=this.$element[0].getBoundingClientRect(),this.allowTransform?this._dragOffset=this.offset:this._dragOffset={left:document.body.scrollLeft,top:document.body.scrollTop},this.$element.centerX=this.$element[0].offsetWidth/2,this.$element.centerY=this.$element[0].offsetHeight/2,this._mx=this.pipDraggable.inputEvent(t).pageX,this._my=this.pipDraggable.inputEvent(t).pageY,this._mrx=this._mx-this.offset.left,this._mry=this._my-this.offset.top,this._centerAnchor?(this._tx=this._mx-this.$element.centerX-this.$window.pageXOffset,this._ty=this._my-this.$element.centerY-this.$window.pageYOffset):(this._tx=this._mx-this._mrx-this.$window.pageXOffset,this._ty=this._my-this._mry-this.$window.pageYOffset),this.$document.on(this._moveEvents,function(t){e.onmove(t)}),this.$document.on(this._releaseEvents,function(t){e.onrelease(t)}),this._deregisterRootMoveListener=this.$rootScope.$on("draggable:_triggerHandlerMove",function(t,i){e.onmove(i)}))},t.prototype.onmove=function(t){var e=this;this._dragEnabled&&(t.preventDefault(),this.$element.hasClass("pip-dragging")||(this._data=this.getDragData(this.$scope),this.$element.addClass("pip-dragging"),this.$rootScope.$broadcast("draggable:start",{x:this._mx,y:this._my,tx:this._tx,ty:this._ty,event:t,element:this.$element,data:this._data}),this.onDragStartCallback&&this.$scope.$apply(function(){e.onDragStartCallback(e.$scope,{$data:e._data,$event:t})})),this._mx=this.pipDraggable.inputEvent(t).pageX,this._my=this.pipDraggable.inputEvent(t).pageY,(this.horizontalScroll||this.verticalScroll)&&this.dragToScroll(),this._centerAnchor?(this._tx=this._mx-this.$element.centerX-this._dragOffset.left,this._ty=this._my-this.$element.centerY-this._dragOffset.top):(this._tx=this._mx-this._mrx-this._dragOffset.left,this._ty=this._my-this._mry-this._dragOffset.top),this.moveElement(this._tx,this._ty),this.$rootScope.$broadcast("draggable:move",{x:this._mx,y:this._my,tx:this._tx,ty:this._ty,event:t,element:this.$element,data:this._data,uid:this._myid,dragOffset:this._dragOffset}),this.onDragMoveCallbak&&this.$scope.$apply(function(){e.onDragMoveCallbak(e.$scope,{$data:e._data,$event:angular.extend(t)})}))},t.prototype.onrelease=function(t){var e=this;this._dragEnabled&&(t.preventDefault(),this.$rootScope.$broadcast("draggable:end",{x:this._mx,y:this._my,tx:this._tx,ty:this._ty,event:t,element:this.$element,data:this._data,callback:this.onDragComplete,uid:this._myid}),this.$element.removeClass("pip-dragging"),this.$element.parent().find(".pip-drag-enter").removeClass("pip-drag-enter"),this.reset(),this.$document.off(this._moveEvents),this.$document.off(this._releaseEvents),this.onDragStopCallback&&this.$scope.$apply(function(){e.onDragStopCallback(e.$scope,{$data:e._data,$event:t})}),this._deregisterRootMoveListener())},t.prototype.onDragComplete=function(t){var e=this;this.onDragSuccessCallback&&this.$scope.$apply(function(){e.onDragSuccessCallback(e.$scope,{$data:e._data,$event:t})})},t.prototype.reset=function(){this.allowTransform?this.$element.css({transform:"","z-index":"","-webkit-transform":"","-ms-transform":""}):this.$element.css({position:this._elementStyle.position,top:this._elementStyle.top,left:this._elementStyle.left,"z-index":"",width:this._elementStyle.width})},t.prototype.moveElement=function(t,e){var i=this.$element.css("width");this.allowTransform?this.$element.css({transform:"matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, "+t+", "+e+", 0, 1)","z-index":99999,"-webkit-transform":"matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, "+t+", "+e+", 0, 1)","-ms-transform":"matrix(1, 0, 0, 1, "+t+", "+e+")"}):this.$element.css({left:t+"px",top:e+"px",position:"fixed","z-index":100,width:i})},t.prototype.dragToScroll=function(){var t=0,e=0,i=function(t){return t.offset()||{left:0,top:0}};if(this.horizontalScroll){var n=i(this.scrollContainer).left,o=this.scrollContainer.innerWidth(),s=n+o;this._mx-n<this.activationDistance?t=-this.scrollDistance:s-this._mx<this.activationDistance&&(t=this.scrollDistance)}if(this.verticalScroll){var r=i(this.scrollContainer).top,a=this.scrollContainer.innerHeight(),c=r+a;this._my-r<this.activationDistance?e=30-this.scrollDistance:c-this._my<this.activationDistance&&(e=this.scrollDistance-30)}if(0!==t||0!==e){var l=this.scrollContainer.scrollLeft(),h=this.scrollContainer.scrollTop();this.scrollContainer.scrollLeft(l+t),this.scrollContainer.scrollTop(h+e)}},t}(),o=function(t,e,i,o,s){return{restrict:"A",link:function(r,a,c){new n(t,e,i,o,s,r,a,c)}}};o.$inject=["$rootScope","$parse","$document","$window","pipDraggable"],angular.module("pipDraggable").directive("pipDrag",o)},{}],3:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function t(){}return t.prototype.inputEvent=function(t){return angular.isDefined(t.touches)?t.touches[0]:angular.isDefined(t.originalEvent)&&angular.isDefined(t.originalEvent.touches)?t.originalEvent.touches[0]:t},t}();angular.module("pipDraggable").service("pipDraggable",n)},{}],4:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function t(t,e,i,n,o,s,r){this.$parse=t,this.$document=e,this.$timeout=i,this.pipDraggable=n,this.$scope=o,this.$element=s,this.$attrs=r,o.value=r.pipDrop,o.isTouching=!1,this._myid=o.$id,this.onDropCallback=t(r.pipDropSuccess),this.onDragStartCallback=t(r.pipDragStart),this.onDragStopCallback=t(r.pipDragStop),this.onDragMoveCallback=t(r.pipDragMove),this.onEnterCallback=t(r.pipEnter),this.onLeaveCallback=t(r.pipLeave),this.onDiactiveCallback=t(r.pipDiactive),this.initialize()}return t.prototype.initialize=function(){this.toggleListeners(!0)},t.prototype.toggleListeners=function(t){var e=this;t&&(this.$scope.$watch(this.$attrs.pipDrop,function(t,i){e.onEnableChange(t,i)}),this.$scope.$on("$destroy",function(t){e.onDestroy(t)}),this.$scope.$on("draggable:start",function(t,i){e.onDragStart(t,i)}),this.$scope.$on("draggable:move",function(t,i){e.onDragMove(t,i)}),this.$scope.$on("draggable:end",function(t,i){e.onDragEnd(t,i)}))},t.prototype.onDestroy=function(t){this.toggleListeners(!1)},t.prototype.onEnableChange=function(t,e){this._dropEnabled=t},t.prototype.onDragStart=function(t,e){var i=this;this._dropEnabled&&(this.isTouching(e.x,e.y,e.element,t,e),this.$attrs.pipDragStart&&this.$timeout(function(){i.onDragStartCallback(i.$scope,{$data:e.data,$event:e})}))},t.prototype.onDragMove=function(t,e){var i=this;this._dropEnabled&&(this.isTouching(e.x,e.y,e.element,t,e),this.$attrs.pipDragMove&&this.$timeout(function(){i.onDragMoveCallback(i.$scope,{$data:e.data,$event:e})}))},t.prototype.onDragEnd=function(t,e){var i=this;if(!this._dropEnabled)return void this.updateDragStyles(!1,e.element);this.isTouching(e.x,e.y,e.element,t,e)&&(e.callback&&e.callback(e),this.$attrs.pipDropSuccess&&this.$timeout(function(){i.onDropCallback(i.$scope,{$data:e.data,$event:e,$target:i.$scope.$eval(i.$scope.value)})}),this.$attrs.pipDiactive&&this.$timeout(function(){i.onDiactiveCallback(i.$scope,{$data:e.data,$event:e,$target:i.$scope.$eval(i.$scope.value)})})),this.$attrs.pipDragStop&&this.$timeout(function(){i.onDragStopCallback(i.$scope,{$data:e.data,$event:e})}),this.updateDragStyles(!1,e.element)},t.prototype.isTouching=function(t,e,i,n,o){var s=this.hitTest(t,e);return s!==this.$scope.isTouching&&(s?this.onEnterCallback(this.$scope,{$data:o.data,$event:o,$target:this.$scope.$eval(this.$scope.value)}):this.onLeaveCallback(this.$scope,{$data:o.data,$event:o,$target:this.$scope.$eval(this.$scope.value)})),this.$scope.isTouching=s,s&&(this._lastDropTouch=this.$element),this.updateDragStyles(s,i),s},t.prototype.updateDragStyles=function(t,e){t?(this.$element.addClass("pip-drag-enter"),e.addClass("pip-drag-over")):this._lastDropTouch==this.$element&&(this._lastDropTouch=null,this.$element.removeClass("pip-drag-enter"),e.removeClass("pip-drag-over"))},t.prototype.hitTest=function(t,e){var i=this.$element[0].getBoundingClientRect();return t-=this.$document[0].body.scrollLeft+this.$document[0].documentElement.scrollLeft,e-=this.$document[0].body.scrollTop+this.$document[0].documentElement.scrollTop,t>=i.left&&t<=i.right&&e<=i.bottom&&e>=i.top},t}(),o=function(t,e,i,o){return{restrict:"A",link:function(s,r,a){new n(t,e,i,o,s,r,a)}}};o.$inject=["$parse","$document","$timeout","pipDraggable"],angular.module("pipDraggable").directive("pipDrop",o)},{}],5:[function(t,e,i){var n=function(){function t(t){this.$element=t,this.initialize()}return t.prototype.initialize=function(){this.$element.attr("pip-draggable","false"),this.toggleListeners(!0)},t.prototype.toggleListeners=function(t){var e=this;t&&this.$element.on("mousedown touchstart touchmove touchend touchcancel",function(t){e.absorbEvent_(t)})},t.prototype.absorbEvent_=function(t){var e=t.originalEvent;return e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0,e.returnValue=!1,!1},t}(),o=function(){return{restrict:"A",link:function(t,e,i){new n(e)}}};angular.module("pipDraggable").directive("pipPreventDrag",o)},{}],6:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),angular.module("pipDraggable",[]),t("./DraggableService"),t("./Drag"),t("./Drop"),t("./PreventDrag"),t("./CancelDrag")},{"./CancelDrag":1,"./Drag":2,"./DraggableService":3,"./Drop":4,"./PreventDrag":5}],7:[function(t,e,i){var n=function(){function t(t,e,i,n,o,s){var r=this;this.$scope=t,this.$element=e,this.$timeout=n,this.$mdConstant=o,this.$window=s,this.opacityDelta=.4,this.opacityLimit=.5,e.on("keydown",function(t){r.keydownListener(t)}),n(function(){r.init()}),i.ngModel&&t.$watch("ngModel",function(){n(this.init)},!0),i.pipFocusedData&&t.$watch("pipFocusedData",function(){n(this.init)},!0)}return t.prototype.init=function(){var t=this,e=this.$scope.pipWithHidden&&this.$scope.pipWithHidden()?".pip-focusable":".pip-focusable:visible";this.onFocusClass=this.$scope.pipFocusedClass?this.$scope.pipFocusedClass():"",this.controls=this.$element.find(e),this.controlsLength=this.controls.length,this.checkTabindex(this.controls),this.controls.on("focus",function(e){var i=e.currentTarget;$(i).hasClass("md-focused")||(t.$scope.pipRebind&&t.$scope.pipRebind()&&t.init(),t.$element.addClass("pip-focused-container"),$(i).addClass(t.onFocusClass),t.$scope.pipFocusedOpacity&&t.$scope.pipFocusedOpacity()?$(i).addClass("md-focused md-focused-opacity"):(t.color=$(i).css("backgroundColor"),t.oldBackgroundColor=t.color,$(i).css("backgroundColor",t.rgba(t.color)),$(i).addClass("md-focused")))}).on("focusout",function(e){var i=e.currentTarget;$(i).hasClass("md-focused")&&(t.$element.removeClass("pip-focused-container"),$(i).removeClass(t.onFocusClass),t.$scope.pipFocusedOpacity&&t.$scope.pipFocusedOpacity()?$(i).removeClass("md-focused"):($(i).css("backgroundColor",t.oldBackgroundColor),$(i).removeClass("md-focused md-focused-opacity")))})},t.prototype.rgba=function(t){if(this.$scope.pipFocusedColor&&this.$scope.pipFocusedColor())return this.$scope.pipFocusedColor();var e=t.split("(")[1].split(")")[0].split(",");if(!e||e.length<3)return"";var i,n,o,s;return s=3==e.length?1:parseFloat(e[3]),i=e[0],n=e[1],o=e[2],s<this.opacityLimit?s+=this.opacityDelta:s-=this.opacityDelta,"rgba("+i+", "+n+", "+o+", "+s+")"},t.prototype.setTabindex=function(t,e){t.attr("tabindex",e)},t.prototype.checkTabindex=function(t){-1==_.findIndex(t,function(t){return t.tabindex>-1})&&t.length>0&&this.$scope.pipFocusedTabindex&&this.setTabindex(angular.element(t[0]),this.$scope.pipFocusedTabindex())},t.prototype.keydownListener=function(t){var e=t.which||t.keyCode;if(e==this.$mdConstant.KEY_CODE.LEFT_ARROW||e==this.$mdConstant.KEY_CODE.UP_ARROW||e==this.$mdConstant.KEY_CODE.RIGHT_ARROW||e==this.$mdConstant.KEY_CODE.DOWN_ARROW){t.preventDefault();var i=e==this.$mdConstant.KEY_CODE.RIGHT_ARROW||e==this.$mdConstant.KEY_CODE.DOWN_ARROW?1:-1,n=this.controls.index(this.controls.filter(".md-focused"))+i;n>=0&&n<this.controlsLength&&this.controls[n].focus()}},t}(),o=function(t,e,i){return{scope:{pipFocusedColor:"&?",pipFocusedClass:"&?",pipFocusedRebind:"&?",pipFocusedTabindex:"&?",pipFocusedOpacity:"&?",pipFocusedData:"&?",pipWithHidden:"&?",pipRebind:"&?"},link:function(o,s,r){new n(o,s,r,t,e,i)}}};o.$inject=["$timeout","$mdConstant","$window"],angular.module("pipFocused",[]).directive("pipFocused",o)},{}],8:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),t("./unsaved_changes/UnsavedChanges"),t("./shortcuts/index"),t("./focused/Focused"),t("./draggable/index"),t("./selected/Selected"),t("./infinite_scroll/InfiniteScroll"),angular.module("pipBehaviors",["pipFocused","pipSelected","pipInfiniteScroll","pipUnsavedChanges","pipDraggable","pipShortcuts"]),function(t){for(var e in t)i.hasOwnProperty(e)||(i[e]=t[e])}(t("./shortcuts/index"))},{"./draggable/index":6,"./focused/Focused":7,"./infinite_scroll/InfiniteScroll":9,"./selected/Selected":10,"./shortcuts/index":16,"./unsaved_changes/UnsavedChanges":17}],9:[function(t,e,i){var n=function(){function t(t,e,i,n,o,s){var r=this;this.$rootScope=t,this.$window=e,this.$interval=i,this.$scope=n,this.$element=o,this.$attrs=s,this.THROTTLE_MILLISECONDS=500,this.checkWhenEnabled=null,this.scrollContainer=null,this.immediateCheck=!0,this.scrollDistance=null,this.scrollEnabled=null,this.unregisterEventListener=null,this.useDocumentBottom=!1,this.windowElement=null,this.windowElement=angular.element(e),this.onContainerScrollThrottle=_.throttle(function(){r.onContainerScroll()},this.THROTTLE_MILLISECONDS),n.$on("$destroy",function(){if(r.scrollContainer.unbind("scroll",function(){r.onContainerScrollThrottle()}),null!==r.unregisterEventListener)return r.unregisterEventListener(),r.unregisterEventListener=null}),n.$watch("pipScrollDistance",function(t){r.handleScrollDistance(t)}),this.handleScrollDistance(n.pipScrollDistance),n.$watch("pipScrollDisabled",function(t){r.handleScrollDisabled(t)}),this.handleScrollDisabled(n.pipScrollDisabled),n.$watch("pipScrollUseDocumentBottom",function(t){r.handleScrollUseDocumentBottom(t)}),this.handleScrollUseDocumentBottom(n.pipScrollUseDocumentBottom),this.changeContainer(this.windowElement),n.pipScrollListenForEvent&&(this.unregisterEventListener=t.$on(n.pipScrollListenForEvent,function(){r.onContainerScrollThrottle()})),n.$watch("pipScrollContainer",function(t){t!=r.scrollContainer&&r.handleScrollContainer(t)}),this.handleScrollContainer(n.pipScrollContainer||[]),null!==s.pipScrollParent&&this.changeContainer(angular.element(o.parent())),null!==s.pipScrolImmediateCheck&&(this.immediateCheck=n.$eval(s.pipScrolImmediateCheck)),i(function(){if(this.immediateCheck)return this.onContainerScrollThrottle()},0,1)}return t.prototype.height=function(t){return t=t[0]||t,isNaN(t.offsetHeight)?t.document.documentElement.clientHeight:t.offsetHeight},t.prototype.offsetTop=function(t){if(t[0].getBoundingClientRect&&!t.css("none"))return t[0].getBoundingClientRect().top+this.pageYOffset(t)},t.prototype.pageYOffset=function(t){return t=t[0]||t,isNaN(window.pageYOffset)?t.document.documentElement.scrollTop:t.ownerDocument.defaultView.pageYOffset},t.prototype.onContainerScroll=function(){var t,e,i,n,o,s=this;return this.scrollContainer===this.windowElement?(t=this.height(this.scrollContainer)+this.pageYOffset(this.scrollContainer[0].document.documentElement),i=this.offsetTop(this.$element)+this.height(this.$element)):(t=this.height(this.scrollContainer),e=0,void 0!==this.offsetTop(this.scrollContainer)&&(e=this.offsetTop(this.scrollContainer)),i=this.offsetTop(this.$element)-e+this.height(this.$element)),this.useDocumentBottom&&(i=this.height((this.$element[0].ownerDocument||this.$element[0].document).documentElement)),n=i-t,o=n<=this.height(this.scrollContainer)*this.scrollDistance+1,o?(this.checkWhenEnabled=!0,this.scrollEnabled?this.$scope.$$phase||this.$rootScope.$$phase?this.$scope.pipInfiniteScroll():this.$scope.$apply(function(){s.$scope.pipInfiniteScroll()}):void 0):this.checkWhenEnabled=!1},t.prototype.handleScrollDistance=function(t){return this.scrollDistance=parseFloat(t)||0},t.prototype.handleScrollDisabled=function(t){this.scrollEnabled=!t,this.scrollEnabled&&this.checkWhenEnabled&&(this.checkWhenEnabled=!1,this.onContainerScrollThrottle())},t.prototype.handleScrollUseDocumentBottom=function(t){return this.useDocumentBottom=t},t.prototype.changeContainer=function(t){var e=this;if(this.scrollContainer&&this.scrollContainer.unbind("scroll",function(){e.onContainerScrollThrottle()}),this.scrollContainer=t,t)return this.scrollContainer.bind("scroll",function(){e.onContainerScrollThrottle()})},t.prototype.handleScrollContainer=function(t){if(null!=t&&0!==t.length){if(t instanceof HTMLElement?t=angular.element(t):"function"==typeof t.append?t=angular.element(t[t.length-1]):"string"==typeof t&&(t=this.$element.parents().find(t)),null!=t&&(!Array.isArray(t)||Array.isArray(t)&&t.length>0))return this.changeContainer(t);throw new Error("Invalid pip-scroll-container attribute.")}},t}(),o=function(t,e,i){return{scope:{pipInfiniteScroll:"&",pipScrollContainer:"=",pipScrollDistance:"=",pipScrollDisabled:"=",pipScrollUseDocumentBottom:"=",pipScrollListenForEvent:"@"},link:function(o,s,r){new n(t,e,i,o,s,r)}}};o.$inject=["$rootScope","$window","$interval"],angular.module("pipInfiniteScroll",[]).directive("pipInfiniteScroll",o)},{}],10:[function(t,e,i){var n=function(){function t(t,e,i,n,o,s){var r=this;this.$mdConstant=e,this.$timeout=i,this.$scope=n,this.$element=o,this.$attrs=s,this.touchBoundary=10,this.tapdelay=200,this.tapTimeout=700,this.indexGetter=s.pipSelected?t(s.pipSelected):null,this.indexSetter=this.indexGetter?this.indexGetter.assign:null,this.idGetter=s.pipSelectedId?t(s.pipSelectedId):null,this.idSetter=this.idGetter?this.idGetter.assign:null,this.changeGetter=s.pipSelect?t(s.pipSelect):null,this.enterSpaceGetter=s.pipEnterSpacePress?t(s.pipEnterSpacePress):null,this.noScroll=s.pipNoScroll,this.modifier=s.pipSkipHidden?":visible":"",this.className=s.pipTreeList?".pip-selectable-tree":".pip-selectable",this.selectedIndex=this.indexGetter(n),this.currentElementTabinex=o.attr("tabindex"),this.pipSelectedWatch=s.pipSelectedWatch,this.isScrolled=!1,o.attr("tabindex",this.currentElementTabinex||0),o.on("click",this.className,function(t){r.onClickEvent(t)}),o.on("touchstart",this.className,function(t){r.onTouchStart(t)}),o.on("touchmove",this.className,function(t){r.onTouchMove(t)}),o.on("touchend",this.className,function(t){r.onTouchEnd(t)}),o.on("touchcancel",this.className,function(t){r.onTouchCancel(t)}),o.on("keydown",function(t){r.onKeyDown(t)}),o.on("focusin",function(t){r.onFocusIn(t)}),o.on("focusout",function(t){r.onFocusOut(t)}),s.pipTreeList?n.$watch(this.idGetter,function(t){i(function(){r.selectItem({itemId:t,raiseEvent:!0})},0)}):n.$watch(this.indexGetter,function(t){r.selectItem({itemIndex:t})}),this.pipSelectedWatch&&n.$watch(this.pipSelectedWatch,function(){i(function(){r.selectedIndex=r.indexGetter(n),r.selectItem({itemIndex:r.selectedIndex})},100)}),this.selectItem({itemIndex:this.selectedIndex,items:o.find(this.className)})}return t.prototype.selectItem=function(t){if(!this.isScrolled){var e=t.itemIndex,i=t.itemId,n=t.items||this.$element.find(this.className+this.modifier),o=n.length,s=function(){return t.item?t.item:(void 0===e&&-1===e&&(e=n.index(n.filter("[pip-id="+i+"]"))),e>=0&&e<o&&n[e])},r=t.raiseEvent;s=s(),s&&(this.$element.find(this.className).removeClass("selected md-focused"),s=angular.element(s).addClass("selected md-focused").focus(),this.noScroll||this.scrollToItem(s),r&&this.defineSelectedIndex(n))}},t.prototype.defineSelectedIndex=function(t){var e=this,i=this.selectedIndex;this.selectedIndex=-1;for(var n=0;n<t.length;n++)if($(t[n]).hasClass("selected")){this.selectedIndex=n;break}var o=function(){var i=angular.element(t[e.selectedIndex]),n=i.attr("pip-id");e.indexSetter&&e.indexSetter(e.$scope,e.selectedIndex),e.idSetter&&e.idSetter(e.$scope,n),s()},s=function(){var n=angular.element(t[e.selectedIndex]),o=n.attr("pip-id");e.changeGetter&&e.changeGetter(e.$scope,{$event:{target:e.$element,item:n,index:e.selectedIndex,id:o,newIndex:e.selectedIndex,oldIndex:i}})};i!=this.selectedIndex&&-1!==this.selectedIndex?this.$scope.$apply(function(){o()}):this.$scope.$apply(function(){s()})},t.prototype.scrollToItem=function(t){var e=this;if(!this.noScroll&&t.offset()){var i=this.$element.offset().top,n=this.$element.height(),o=i+n,s=t.offset().top,r=t.outerHeight(!0),a=s+r,c=this.$element.scrollTop();this.isScrolled=!0,this.$timeout(function(){e.isScrolled=!1},100),i>s?this.$element.scrollTop(c+s-i):o<a&&this.$element.scrollTop(c+a-o)}},t.prototype.getTargetElementFromEventTarget=function(t){return t.nodeType===Node.TEXT_NODE?t.parentNode:t},t.prototype.touchHasMoved=function(t){var e=t.changedTouches[0],i=this.touchBoundary;return Math.abs(e.pageX-this.touchStartX)>i||Math.abs(e.pageY-this.touchStartY)>i},t.prototype.onClickEvent=function(t){this.selectItem({item:t.currentTarget,raiseEvent:!0})},t.prototype.onTouchStart=function(t){var e=t.originalEvent;if(e.targetTouches.length>1)return!0;var i=this.getTargetElementFromEventTarget(e.target),n=e.targetTouches[0];return this.trackingClick=!0,this.trackingClickStart=e.timeStamp,this.targetElement=i,this.touchStartX=n.pageX,this.touchStartY=n.pageY,!0},t.prototype.onTouchMove=function(t){if(!this.trackingClick)return!0;var e=t.originalEvent;return(this.targetElement!==this.getTargetElementFromEventTarget(e.target)||this.touchHasMoved(e))&&(this.trackingClick=!1,this.targetElement=null),!0},t.prototype.onTouchEnd=function(t){this.targetElement;if(!this.trackingClick)return!0;var e=t.originalEvent;return e.timeStamp-this.lastClickTime<this.tapdelay?(this.cancelNextClick=!0,!0):e.timeStamp-this.trackingClickStart>this.tapTimeout||(this.cancelNextClick=!1,this.lastClickTime=t.timeStamp,this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,this.selectItem({item:t.currentTarget,raiseEvent:!0}),!1)},t.prototype.onTouchCancel=function(t){this.trackingClick=!1,this.targetElement=null},t.prototype.onKeyDown=function(t){var e=t.which||t.keyCode;if(e==this.$mdConstant.KEY_CODE.ENTER||e==this.$mdConstant.KEY_CODE.SPACE)t.preventDefault(),t.stopPropagation(),this.enterSpaceGetter&&this.enterSpaceGetter(this.$scope,{$event:{target:this.$element,index:this.selectedIndex,item:this.$element.find(".selected")}});else if(e==this.$mdConstant.KEY_CODE.LEFT_ARROW||e==this.$mdConstant.KEY_CODE.RIGHT_ARROW||e==this.$mdConstant.KEY_CODE.UP_ARROW||e==this.$mdConstant.KEY_CODE.DOWN_ARROW){t.preventDefault(),t.stopPropagation();var i=this.$element.find(this.className+this.modifier),n=e==this.$mdConstant.KEY_CODE.RIGHT_ARROW||e==this.$mdConstant.KEY_CODE.DOWN_ARROW?1:-1,o=this.selectedIndex+n;this.selectItem({itemIndex:o,items:i,raiseEvent:!0})}},t.prototype.onFocusIn=function(t){var e,i=this.$element.find(this.className+".selected");i.addClass("md-focused"),0===i.length&&(this.selectedIndex=this.indexGetter(this.$scope),e=this.$element.find(this.className+this.modifier),this.selectItem({itemIndex:this.selectedIndex||0,items:e,raiseEvent:!0}))},t.prototype.onFocusOut=function(t){this.$element.find(this.className+".md-focused"+this.modifier).removeClass("md-focused")},t}(),o=function(t,e,i){return{restrict:"A",scope:!1,link:function(o,s,r){new n(t,e,i,o,s,r)}}};o.$inject=["$parse","$mdConstant","$timeout"],angular.module("pipSelected",[]).directive("pipSelected",o)},{}],11:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function t(){}return t}();i.ShortcutItem=n;var o=function(){function t(){this.globalShortcuts=[],this.localShortcuts=[],this.defaultOptions=null}return t}();i.ShortcutsConfig=o},{}],12:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function t(){}return t}();n.Keydown="keydown",n.Keyup="keyup",n.Keypress="keypress",i.KeyboardEvent=n;var o=function(){function t(){}return t}();i.ShortcutOptions=o;var s=function(){function t(t,e,i,n){"ngInject";var o=this;this.shift_nums={"`":"~",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(",0:")","-":"_","=":"+",";":":","'":'"',",":"<",".":">","/":"?","\\":"|"},this.special_keys={esc:27,escape:27,tab:9,space:32,return:13,enter:13,backspace:8,scrolllock:145,scroll_lock:145,scroll:145,capslock:20,caps_lock:20,caps:20,numlock:144,num_lock:144,num:144,pause:19,break:19,insert:45,home:36,delete:46,end:35,pageup:33,page_up:33,pu:33,pagedown:34,page_down:34,pd:34,left:37,up:38,right:39,down:40,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},this.modifiers={shift:{wanted:!1,pressed:!1},ctrl:{wanted:!1,pressed:!1},alt:{wanted:!1,pressed:!1},meta:{wanted:!1,pressed:!1}},this.target=t,this.shorcut=e,this.event=i.Type,this.option=i,this.callback=n,this.eventCallback=function(t){var e,i=t||window.event;if(o.option.DisableInInput){var n;if(i.target?n=i.target:i.srcElement&&(n=i.srcElement),3==n.nodeType&&(n=n.parentNode),"INPUT"==n.tagName||"TEXTAREA"==n.tagName)return}i.keyCode?e=i.keyCode:i.which&&(e=i.which);var s=String.fromCharCode(e).toLowerCase();188==e&&(s=","),190==e&&(s=".");var r=o.shorcut.split("+"),a=0;i.ctrlKey&&(o.modifiers.ctrl.pressed=i.ctrlKey),i.shiftKey&&(o.modifiers.shift.pressed=i.shiftKey),i.altKey&&(o.modifiers.alt.pressed=i.altKey),i.metaKey&&(o.modifiers.meta.pressed=i.metaKey);var c=0;for(c=0;c<r.length;c++){var l=r[c];"ctrl"==l||"control"==l?(a++,o.modifiers.ctrl.wanted=!0):"shift"==l?(a++,o.modifiers.shift.wanted=!0):"alt"==l?(a++,o.modifiers.alt.wanted=!0):"meta"==l?(a++,o.modifiers.meta.wanted=!0):l.length>1?o.special_keys[l]==e&&a++:o.option.Keycode?o.option.Keycode==e&&a++:s==l?a++:o.shift_nums[s]&&i.shiftKey&&(s=o.shift_nums[s])==l&&a++}if(a==r.length&&o.modifiers.ctrl.pressed==o.modifiers.ctrl.wanted&&o.modifiers.shift.pressed==o.modifiers.shift.wanted&&o.modifiers.alt.pressed==o.modifiers.alt.wanted&&o.modifiers.meta.pressed==o.modifiers.meta.wanted&&(o.callback(i),!o.option.Propagate))return i.cancelBubble=!0,i.returnValue=!1,i.stopPropagation&&(i.stopPropagation(),i.preventDefault()),!1;o.modifiers.ctrl.pressed=!1,o.modifiers.shift.pressed=!1,o.modifiers.alt.pressed=!1,o.modifiers.meta.pressed=!1}}return t.$inject=["element","shorcutCombination","option","callback"],t}();i.Shortcut=s},{}],13:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=t("./Shortcut"),o=function(){function t(t,e){"ngInject";this._shortcuts={},this._log=t,this._defaultOption=e?_.defaults(e,this.getDefaultOption()):this.getDefaultOption()}return t.$inject=["$log","option"],t.prototype.getDefaultOption=function(){return{Type:n.KeyboardEvent.Keydown,Propagate:!1,DisableInInput:!1,Target:document,Keycode:null}},Object.defineProperty(t.prototype,"shortcuts",{get:function(){return this._shortcuts},enumerable:!0,configurable:!0}),t.prototype.add=function(t,e,i){this.remove(t);var o=i?_.defaults(i,this._defaultOption):this._defaultOption,s=t.toLowerCase(),r=o.Target;if(!(r="string"==typeof o.Target?document.getElementById(o.Target):o.Target))return void this._log.error("Register shortcut: element undentified!")
;if(!s)return void this._log.error("Register shortcut: shortcut combination undentified!");if(!e)return void this._log.error("Register shortcut: shorcut callback undentified!");var a=new n.Shortcut(r,s,o,e);this._shortcuts[s]=a,r.addEventListener?r.addEventListener(o.Type,a.eventCallback,!1):r.attachEvent?r.attachEvent("on"+o.Type,a.eventCallback):r.on(o.Type,a.eventCallback)},t.prototype.remove=function(t){var e=t.toLowerCase(),i=this._shortcuts[e];if(delete this._shortcuts[e],i){var n=i.event,o=i.target,s=i.eventCallback;o.detachEvent?o.detachEvent("on"+n,s):o.removeEventListener?o.removeEventListener(n,s,!1):o.off(n,s)}},t}(),s=function(){function t(){}return Object.defineProperty(t.prototype,"option",{get:function(){return this._option},set:function(t){this._option=t||new n.ShortcutOptions},enumerable:!0,configurable:!0}),t.prototype.$get=["$log",function(t){"ngInject";return null==this._service&&(this._service=new o(t,this._option)),this._service}],t}();angular.module("pipShortcuts").provider("pipShortcutBinding",s)},{"./Shortcut":12}],14:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function t(t,e,i,n,o,s){"ngInject";var r=this;return e.pipShortcutAction?(this.actionShortcuts=o(e.pipShortcutAction),e.pipShortcutName&&_.isString(e.pipShortcutName)?(this.nameShortcuts=e.pipShortcutName,this.options=e.pipShorcutOptions?e.pipShorcutOptions:{},this.options.Target=t,void s.add(this.nameShortcuts,function(t){r.actionShortcuts(i,{$event:{e:t}})},this.options)):void n.error("Shortcut name does not set.")):void n.error("Shortcut action does not set.")}return t.$inject=["$element","$attrs","$scope","$log","$parse","pipShortcutBinding"],t.prototype.keypressShortcut=function(t){this.actionShortcuts()},t.prototype.$onInit=function(){},t}(),o=function(){return{restrict:"A",scope:!1,controller:n}};angular.module("pipShortcuts").directive("pipShortcut",o)},{}],15:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=t("./IShortcutsService");i.ShortcutsChangedEvent="pipShortcutsChanged";var o=function(){function t(t,e,i,n,o,s){"ngInject";this.$rootScope=e,this.$window=i,this.$location=n,this.$injector=o,this.pipShortcutBinding=s,this._config=t,this._oldConfig=_.cloneDeep(this._config),this.addShortcuts(this._config.globalShortcuts),this.addShortcuts(this._config.localShortcuts)}return t.$inject=["config","$rootScope","$window","$location","$injector","pipShortcutBinding"],t.prototype.sendChangeEvent=function(){this.removeShortcuts(this._oldConfig.globalShortcuts),this.removeShortcuts(this._oldConfig.localShortcuts),this.addShortcuts(this.config.globalShortcuts),this.addShortcuts(this.config.localShortcuts),this.$rootScope.$emit(i.ShortcutsChangedEvent,this.config),this._oldConfig=_.cloneDeep(this.config)},t.prototype.removeShortcuts=function(t){var e=this;_.each(t,function(t){e.pipShortcutBinding.remove(t.shortcut)})},t.prototype.keypressShortcut=function(t,e){if(!t.access||!_.isFunction(t.access)||t.access(e)){if(t.keypress)return void t.keypress(e);if(t.href)return void(this.$window.location.href=t.href);if(t.url)return void this.$location.url(t.url);if(t.state){if(this.$injector.has("$state")){var i=this.$injector.get("$state");i.go(t.state,t.stateParams)}}else t.event?this.$rootScope.$broadcast(t.event):this.$rootScope.$broadcast("pipShortcutKeypress",t.shortcut)}},t.prototype.addShortcuts=function(t){var e=this,i=this.config.defaultOptions?this.config.defaultOptions:{};_.each(t,function(t){var n,o=t.options?t.options:i;n=t.target?t.target:t.targetId,n&&(o.Target=n),e.pipShortcutBinding.add(t.shortcut,function(i){e.keypressShortcut(t,i)},o)})},Object.defineProperty(t.prototype,"config",{get:function(){return this._config},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"defaultOptions",{get:function(){return this._config.defaultOptions},set:function(t){this._config.defaultOptions=t||null,this.sendChangeEvent()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"globalShortcuts",{get:function(){return this._config.globalShortcuts},set:function(t){this._config.globalShortcuts=t||[],this.sendChangeEvent()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"localShortcuts",{get:function(){return this._config.localShortcuts},set:function(t){this._config.localShortcuts=t||[],this.sendChangeEvent()},enumerable:!0,configurable:!0}),t}(),s=function(){function t(){this._config=new n.ShortcutsConfig}return Object.defineProperty(t.prototype,"config",{get:function(){return this._config},set:function(t){this._config=t||new n.ShortcutsConfig},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"defaultOptions",{get:function(){return this._config.defaultOptions},set:function(t){this._config.defaultOptions=t||null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"globalShortcuts",{get:function(){return this._config.globalShortcuts},set:function(t){this._config.globalShortcuts=t||[]},enumerable:!0,configurable:!0}),t.prototype.$get=["$rootScope","$window","$location","$injector","pipShortcutBinding",function(t,e,i,n,s){"ngInject";return null==this._service&&(this._service=new o(this._config,t,e,i,n,s)),this._service}],t}();angular.module("pipShortcuts").provider("pipShortcuts",s)},{"./IShortcutsService":11}],16:[function(t,e,i){"use strict";function n(t){for(var e in t)i.hasOwnProperty(e)||(i[e]=t[e])}Object.defineProperty(i,"__esModule",{value:!0}),angular.module("pipShortcuts",["ngMaterial","ui.router"]),t("./ShortcutBindingService"),t("./ShortcutsService"),t("./ShortcutDirective"),n(t("./IShortcutsService")),n(t("./ShortcutsService"))},{"./IShortcutsService":11,"./ShortcutBindingService":13,"./ShortcutDirective":14,"./ShortcutsService":15}],17:[function(t,e,i){var n=function(){function t(t,e){e.onbeforeunload=function(){if(t.unsavedChangesAvailable())return t.unsavedChangesMessage};var i=t.$on("$stateChangeStart",function(i){t.unsavedChangesAvailable()&&!e.confirm(t.unsavedChangesMessage)?(_.isFunction(t.cancelLeave)&&t.cancelLeave(),i.preventDefault()):_.isFunction(t.afterLeave)&&t.afterLeave()});t.$on("$destroy",function(){e.onbeforeunload=null,i()})}return t}(),o=function(t){return{restrict:"AE",scope:{unsavedChangesAvailable:"&pipUnsavedChangesAvailable",unsavedChangesMessage:"@pipUnsavedChangesMessage",afterLeave:"&pipUnsavedChangesAfterLeave",cancelLeave:"&pipUnsavedChangesCancelLeave"},link:function(e){new n(e,t)}}};o.$inject=["$window"],angular.module("pipUnsavedChanges",[]).directive("pipUnsavedChanges",o)},{}]},{},[8])(8)});
//# sourceMappingURL=pip-webui-behaviors.min.js.map
